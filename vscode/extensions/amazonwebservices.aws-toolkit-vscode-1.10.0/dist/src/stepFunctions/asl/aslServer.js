/*! For license information please see aslServer.js.LICENSE */
module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1884)}({10:function(e,t){e.exports=require("fs")},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGES={INVALID_NEXT:'The value of "Next" property must be the name of an existing state.',INVALID_DEFAULT:'The value of "Default" property must be the name of an existing state.',INVALID_START_AT:'The value of "StartAt" property must be the name of an existing state.',UNREACHABLE_STATE:"The state cannot be reached. It must be referenced by at least one other state.",NO_TERMINAL_STATE:'No terminal state. The state machine must have at least one terminal state (a state in which the "End" property is set to true).',INVALID_PROPERTY_NAME:"Field is not supported.",MUTUALLY_EXCLUSIVE_CHOICE_PROPERTIES:"Each Choice Rule can only have one comparison operator."}},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(45);t.default=function(e,t,n){const{length:o,offset:i}=e.keyNode,s=r.Range.create(t.positionAt(i),t.positionAt(i+o));return r.Diagnostic.create(s,n,r.DiagnosticSeverity.Error)}},12:function(e,t){e.exports=require("os")},13:function(e,t){e.exports=require("crypto")},16:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const o=n(20);t.ErrorCodes=o.ErrorCodes,t.ResponseError=o.ResponseError,t.CancellationToken=o.CancellationToken,t.CancellationTokenSource=o.CancellationTokenSource,t.Disposable=o.Disposable,t.Event=o.Event,t.Emitter=o.Emitter,t.Trace=o.Trace,t.TraceFormat=o.TraceFormat,t.SetTraceNotification=o.SetTraceNotification,t.LogTraceNotification=o.LogTraceNotification,t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.MessageReader=o.MessageReader,t.MessageWriter=o.MessageWriter,t.ConnectionStrategy=o.ConnectionStrategy,t.StreamMessageReader=o.StreamMessageReader,t.StreamMessageWriter=o.StreamMessageWriter,t.IPCMessageReader=o.IPCMessageReader,t.IPCMessageWriter=o.IPCMessageWriter,t.createClientPipeTransport=o.createClientPipeTransport,t.createServerPipeTransport=o.createServerPipeTransport,t.generateRandomPipeName=o.generateRandomPipeName,t.createClientSocketTransport=o.createClientSocketTransport,t.createServerSocketTransport=o.createServerSocketTransport,t.ProgressType=o.ProgressType,r(n(7)),r(n(257));const i=n(268),s=n(269);!function(e){let t,n,r,o,a,c;!function(e){e.method=i.CallHierarchyPrepareRequest.method,e.type=i.CallHierarchyPrepareRequest.type}(t=e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})),function(e){e.method=i.CallHierarchyIncomingCallsRequest.method,e.type=i.CallHierarchyIncomingCallsRequest.type}(n=e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})),function(e){e.method=i.CallHierarchyOutgoingCallsRequest.method,e.type=i.CallHierarchyOutgoingCallsRequest.type}(r=e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={})),e.SemanticTokenTypes=s.SemanticTokenTypes,e.SemanticTokenModifiers=s.SemanticTokenModifiers,e.SemanticTokens=s.SemanticTokens,function(e){e.method=s.SemanticTokensRequest.method,e.type=s.SemanticTokensRequest.type}(o=e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(e){e.method=s.SemanticTokensEditsRequest.method,e.type=s.SemanticTokensEditsRequest.type}(a=e.SemanticTokensEditsRequest||(e.SemanticTokensEditsRequest={})),function(e){e.method=s.SemanticTokensRangeRequest.method,e.type=s.SemanticTokensRangeRequest.type}(c=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={}))}(t.Proposed||(t.Proposed={})),t.createProtocolConnection=function(e,t,n,r){return o.createMessageConnection(e,t,n,r)}},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20);class o extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=o;class i extends r.RequestType{constructor(e){super(e)}}t.ProtocolRequestType=i;class s extends r.NotificationType{constructor(e){super(e)}}t.ProtocolNotificationType=s;class a extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a},176:function(e,t){e.exports=require("timers")},1884:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(190),i=n(577),s=n(2),a=n(176),c=n(44),u=n(1891),l=n(1892);var f,p;!function(e){e.type=new i.NotificationType("asl/resultLimitReached")}(f||(f={})),function(e){e.type=new i.RequestType("asl/validate")}(p||(p={}));const d=i.createConnection();process.on("unhandledRejection",e=>{console.error(l.formatError("Unhandled exception",e))}),process.on("uncaughtException",e=>{console.error(l.formatError("Unhandled exception",e))}),console.log=d.console.log.bind(d.console),console.error=d.console.error.bind(d.console);const h={resolveRelativePath:(e,t)=>c.resolve(t,e)};let m=o.getLanguageService({workspaceContext:h,contributions:[],clientCapabilities:o.ClientCapabilities.LATEST});const g=new i.TextDocuments(o.TextDocument);g.listen(d);let y=!1,v=!1,b=!1,S=Number.MAX_VALUE,T=Number.MAX_VALUE,C=Number.MAX_VALUE;var x;let O;d.onInitialize(e=>{function t(t,n){const r=t.split(".");let o=e.capabilities;for(let e=0;o&&e<r.length;e++){if(!o.hasOwnProperty(r[e]))return n;o=o[r[e]]}return o}return m=o.getLanguageService({workspaceContext:h,contributions:[],clientCapabilities:e.capabilities}),y=t("textDocument.completion.completionItem.snippetSupport",!1),v=t("textDocument.rangeFormatting.dynamicRegistration",!1)&&"boolean"!=typeof e.initializationOptions.provideFormatter,S=t("textDocument.foldingRange.rangeLimit",Number.MAX_VALUE),b=t("textDocument.documentSymbol.hierarchicalDocumentSymbolSupport",!1),{capabilities:{textDocumentSync:i.TextDocumentSyncKind.Incremental,completionProvider:y?{resolveProvider:!0,triggerCharacters:['"',":"]}:void 0,hoverProvider:!0,documentSymbolProvider:!0,documentRangeFormattingProvider:!0===e.initializationOptions.provideFormatter,colorProvider:{},foldingRangeProvider:!0,selectionRangeProvider:!0}}}),function(e){const t={};e.cancel=function(e){const n=t[e];n&&n.timeout&&(a.clearTimeout(n.timeout),delete t[e])},e.onResultLimitExceeded=function(e,n,r){return()=>{let o=t[e];if(o){if(!o.timeout)return;o.features[r]=r,o.timeout.refresh()}else o={features:{[r]:r}},o.timeout=a.setTimeout(()=>{d.sendNotification(f.type,`${s.posix.basename(e)}: For performance reasons, ${Object.keys(o.features).join(" and ")} have been limited to ${n} items.`),o.timeout=void 0},2e3),t[e]=o}}}(x||(x={})),d.onDidChangeConfiguration(e=>{var t,n,r,o,s,a,c,u,l,f,p,h,m;const g=e.settings;if(T=Math.trunc(Math.max((null===(o=null===(r=null===(n=null===(t=g)||void 0===t?void 0:t.aws)||void 0===n?void 0:n.stepfunctions)||void 0===r?void 0:r.asl)||void 0===o?void 0:o.resultLimit)||S,0)),C=Math.trunc(Math.max((null===(u=null===(c=null===(a=null===(s=g)||void 0===s?void 0:s.aws)||void 0===a?void 0:a.stepfunctions)||void 0===c?void 0:c.asl)||void 0===u?void 0:u.resultLimit)||Number.MAX_VALUE,0)),v){(null===(m=null===(h=null===(p=null===(f=null===(l=g)||void 0===l?void 0:l.aws)||void 0===f?void 0:f.stepfunctions)||void 0===p?void 0:p.asl)||void 0===h?void 0:h.format)||void 0===m?void 0:m.enable)?O||(O=d.client.register(i.DocumentRangeFormattingRequest.type,{documentSelector:[{language:"asl"}]})):O&&(O.then(e=>e.dispose()),O=void 0)}}),d.onRequest(p.type,e=>r(void 0,void 0,void 0,(function*(){return new Promise(t=>{const n=g.get(e);n?w(n,e=>{t(e)}):t([])})}))),g.onDidChangeContent(e=>{x.cancel(e.document.uri),P(e.document)}),g.onDidClose(e=>{x.cancel(e.document.uri),R(e.document),d.sendDiagnostics({uri:e.document.uri,diagnostics:[]})});const k={};function R(e){const t=k[e.uri];t&&(a.clearTimeout(t),delete k[e.uri])}function P(e){R(e),k[e.uri]=a.setTimeout(()=>{delete k[e.uri],w(e)},500)}function w(e,t){const n=n=>{d.sendDiagnostics({uri:e.uri,diagnostics:n}),t&&t(n)};if(0===e.getText().length)return void n([]);const r=N(e),o=e.version;m.doValidation(e,r,{comments:"error",trailingCommas:"error"}).then(t=>{a.setTimeout(()=>{const r=g.get(e.uri);r&&r.version===o&&n(t)},100)},t=>{d.console.error(l.formatError(`Error while validating ${e.uri}`,t))})}d.onDidChangeWatchedFiles(e=>{let t=!1;e.changes.forEach(e=>{m.resetSchema(e.uri)&&(t=!0)}),t&&g.all().forEach(P)});const E=u.getLanguageModelCache(10,60,e=>m.parseJSONDocument(e));function N(e){return E.get(e)}g.onDidClose(e=>{E.onDocumentRemoved(e.document)}),d.onShutdown(()=>{E.dispose()}),d.onCompletion((e,t)=>l.runSafeAsync(()=>r(void 0,void 0,void 0,(function*(){const t=g.get(e.textDocument.uri);if(t){const n=N(t);return m.doComplete(t,e.position,n)}})),void 0,`Error while computing completions for ${e.textDocument.uri}`,t)),d.onCompletionResolve((e,t)=>l.runSafeAsync(()=>m.doResolve(e),e,"Error while resolving completion proposal",t)),d.onHover((e,t)=>l.runSafeAsync(()=>r(void 0,void 0,void 0,(function*(){const t=g.get(e.textDocument.uri);if(t){const n=N(t);return m.doHover(t,e.position,n)}})),void 0,`Error while computing hover for ${e.textDocument.uri}`,t)),d.onDocumentSymbol((e,t)=>l.runSafe(()=>{const t=g.get(e.textDocument.uri);if(t){const e=N(t),n=x.onResultLimitExceeded(t.uri,C,"document symbols");return b?m.findDocumentSymbols2(t,e,{resultLimit:C,onResultLimitExceeded:n}):m.findDocumentSymbols(t,e,{resultLimit:C,onResultLimitExceeded:n})}return[]},[],`Error while computing document symbols for ${e.textDocument.uri}`,t)),d.onDocumentRangeFormatting((e,t)=>l.runSafe(()=>{const t=g.get(e.textDocument.uri);return t?m.format(t,e.range,e.options):[]},[],`Error while formatting range for ${e.textDocument.uri}`,t)),d.onDocumentColor((e,t)=>l.runSafeAsync(()=>r(void 0,void 0,void 0,(function*(){const t=g.get(e.textDocument.uri);if(t){const e=x.onResultLimitExceeded(t.uri,C,"document colors"),n=N(t);return m.findDocumentColors(t,n,{resultLimit:C,onResultLimitExceeded:e})}return[]})),[],`Error while computing document colors for ${e.textDocument.uri}`,t)),d.onColorPresentation((e,t)=>l.runSafe(()=>{const t=g.get(e.textDocument.uri);if(t){const n=N(t);return m.getColorPresentations(t,n,e.color,e.range)}return[]},[],`Error while computing color presentations for ${e.textDocument.uri}`,t)),d.onFoldingRanges((e,t)=>l.runSafe(()=>{const t=g.get(e.textDocument.uri);if(t){const e=x.onResultLimitExceeded(t.uri,T,"folding ranges");return m.getFoldingRanges(t,{rangeLimit:T,onRangeLimitExceeded:e})}},void 0,`Error while computing folding ranges for ${e.textDocument.uri}`,t)),d.onSelectionRanges((e,t)=>l.runSafe(()=>{const t=g.get(e.textDocument.uri);if(t){const n=N(t);return m.getSelectionRanges(t,e.positions,n)}return[]},[],`Error while computing selection ranges for ${e.textDocument.uri}`,t)),d.listen()},1885:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),o=n(578);t.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?o.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(r.ConfigurationRequest.type,t).then(t=>Array.isArray(e)?t:t[0])}}},1886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16);t.WorkspaceFoldersFeature=e=>class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new r.Emitter,this.connection.onNotification(r.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(r.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(r.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}},1887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),o=n(579);class i{constructor(e,t){this._connection=e,this._token=t,i.Instances.set(this._token,this),this._source=new r.CancellationTokenSource}get token(){return this._source.token}begin(e,t,n,o){let i={kind:"begin",title:e,percentage:t,message:n,cancellable:o};this._connection.sendProgress(r.WorkDoneProgress.type,this._token,i)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(r.WorkDoneProgress.type,this._token,n)}done(){i.Instances.delete(this._token),this._source.dispose(),this._connection.sendProgress(r.WorkDoneProgress.type,this._token,{kind:"end"})}cancel(){this._source.cancel()}}i.Instances=new Map;class s{constructor(){this._source=new r.CancellationTokenSource}get token(){return this._source.token}begin(){}report(){}done(){}}var a;t.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new s;const n=t.workDoneToken;return delete t.workDoneToken,new i(e,n)},t.ProgressFeature=e=>class extends e{initialize(e){var t;!0===(null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(r.WorkDoneProgressCancelNotification.type,e=>{let t=i.Instances.get(e.token);void 0!==t&&t.cancel()}))}attachWorkDoneProgress(e){return void 0===e?new s:new i(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=o.generateUuid();return this.connection.sendRequest(r.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new i(this.connection,e))}return Promise.resolve(new s)}},function(e){e.type=new r.ProgressType}(a||(a={}));class c{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(a.type,this._token,e)}}t.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new c(e,n)}},1888:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=n(44),o=n(2),i=n(10),s=n(92);function a(){return"win32"===process.platform}function c(e,t,n,r){const a=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((c,u)=>{let l=process.env,f=Object.create(null);Object.keys(l).forEach(e=>f[e]=l[e]),t&&i.existsSync(t)&&(f.NODE_PATH?f.NODE_PATH=t+o.delimiter+f.NODE_PATH:f.NODE_PATH=t,r&&r(`NODE_PATH value is: ${f.NODE_PATH}`)),f.ELECTRON_RUN_AS_NODE="1";try{let t=s.fork("",[],{cwd:n,env:f,execArgv:["-e",a]});if(void 0===t.pid)return void u(new Error(`Starting process to resolve node module  ${e} failed`));t.on("error",e=>{u(e)}),t.on("message",n=>{"r"===n.c&&(t.send({c:"e"}),n.s?c(n.r):u(new Error(`Failed to resolve module: ${e}`)))});let r={c:"rs",a:e};t.send(r)}catch(e){u(e)}})}function u(e){let t="npm";const n=Object.create(null);Object.keys(process.env).forEach(e=>n[e]=process.env[e]),n.NO_UPDATE_NOTIFIER="true";const r={encoding:"utf8",env:n};a()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let n=s.spawnSync(t,["config","get","prefix"],r).stdout;if(!n)return void(e&&e("'npm config get prefix' didn't return a value."));let c=n.trim();return e&&e(`'npm config get prefix' value is: ${c}`),c.length>0?a()?o.join(c,"node_modules"):o.join(c,"lib","node_modules"):void 0}catch(e){return}finally{process.removeListener("SIGPIPE",i)}}var l;t.uriToFilePath=function(e){let t=r.parse(e);if("file:"!==t.protocol||!t.path)return;let n=t.path.split("/");for(var i=0,s=n.length;i<s;i++)n[i]=decodeURIComponent(n[i]);if("win32"===process.platform&&n.length>1){let e=n[0],t=n[1];0===e.length&&t.length>1&&":"===t[1]&&n.shift()}return o.normalize(n.join("/"))},t.resolve=c,t.resolveGlobalNodePath=u,t.resolveGlobalYarnPath=function(e){let t="yarn",n={encoding:"utf8"};a()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=s.spawnSync(t,["global","dir","--json"],n),a=i.stdout;if(!a)return void(e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr)));let c=a.trim().split(/\r?\n/);for(let e of c)try{let t=JSON.parse(e);if("log"===t.type)return o.join(t.data,"node_modules")}catch(e){}return}catch(e){return}finally{process.removeListener("SIGPIPE",r)}},function(t){let n=void 0;function r(){return void 0!==n?n:(n="win32"!==process.platform&&(!i.existsSync(e.toUpperCase())||!i.existsSync(e.toLowerCase())),n)}t.isCaseSensitive=r,t.isParent=function(e,t){return r()?0===o.normalize(t).indexOf(o.normalize(e)):0===o.normalize(t).toLowerCase().indexOf(o.normalize(e).toLowerCase())}}(l=t.FileSystem||(t.FileSystem={})),t.resolveModulePath=function(e,t,n,r){return n?(o.isAbsolute(n)||(n=o.join(e,n)),c(t,n,n,r).then(e=>l.isParent(n,e)?e:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,n=>c(t,u(r),e,r))):c(t,u(r),e,r)}}).call(this,"/index.js")},1889:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16);t.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(r.Proposed.CallHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))},onIncomingCalls:e=>{const t=r.Proposed.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))},onOutgoingCalls:e=>{const t=r.Proposed.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))}}}}},1890:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16);t.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:e=>{const t=r.Proposed.SemanticTokensRequest.type;this.connection.onRequest(t,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))},onEdits:e=>{const t=r.Proposed.SemanticTokensEditsRequest.type;this.connection.onRequest(t,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))},onRange:e=>{const t=r.Proposed.SemanticTokensRangeRequest.type;this.connection.onRequest(t,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n)))}}}};t.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,o){let i=e,s=t;this._dataLen>0&&(i-=this._prevLine,0===i&&(s-=this._prevChar)),this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0!==this._prevData){const e=this._prevData.length,t=this._data.length;let n=0;for(;n<t&&n<e&&this._prevData[n]===this._data[n];)n++;if(n<t&&n<e){let r=0;for(;r<t&&r<e&&this._prevData[e-1-r]===this._data[t-1-r];)r++;const o=this._data.slice(n,t-r);return{resultId:this.id,edits:[{start:n,deleteCount:e-r-n,data:o}]}}return n<t?{resultId:this.id,edits:[{start:n,deleteCount:0,data:this._data.slice(n)}]}:n<e?{resultId:this.id,edits:[{start:n,deleteCount:e-n}]}:{resultId:this.id,edits:[]}}return this.build()}}},1891:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageModelCache=function(e,t,n){let r,o={},i=0;return t>0&&(r=setInterval(()=>{const e=Date.now()-1e3*t,n=Object.keys(o);for(const t of n){o[t].cTime<e&&(delete o[t],i--)}},1e3*t)),{get(t){const r=t.version,s=t.languageId,a=o[t.uri];if(a&&a.version===r&&a.languageId===s)return a.cTime=Date.now(),a.languageModel;const c=n(t);if(o[t.uri]={languageModel:c,version:r,languageId:s,cTime:Date.now()},a||i++,i===e){let e,t=Number.MAX_VALUE;for(const n of Object.keys(o)){const r=o[n];r.cTime<t&&(e=n,t=r.cTime)}e&&(delete o[e],i--)}return c},onDocumentRemoved(e){const t=e.uri;o[t]&&(delete o[t],i--)},dispose(){void 0!==r&&(clearInterval(r),r=void 0,o={},i=0)}}}},1892:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(577);function o(e,t){if(t instanceof Error){const n=t;return`${e}: ${n.message}\n${n.stack}`}return"string"==typeof t?`${e}: ${t}`:t?`${e}: ${t.toString()}`:e}function i(){return console.log("cancelled"),new r.ResponseError(r.ErrorCodes.RequestCancelled,"Request cancelled")}t.formatError=o,t.runSafeAsync=function(e,t,n,r){return new Promise(s=>{setImmediate(()=>(r.isCancellationRequested&&s(i()),e().then(e=>{r.isCancellationRequested?s(i()):s(e)},e=>{console.error(o(n,e)),s(t)})))})},t.runSafe=function(e,t,n,r){return new Promise(s=>{setImmediate(()=>{if(r.isCancellationRequested)s(i());else try{const t=e();if(r.isCancellationRequested)return void s(i());s(t)}catch(e){console.error(o(n,e)),s(t)}})})}},190:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(45),s=o(n(191)),a=n(36),c=o(n(192)),u=o(n(197));!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(45)),t.getLanguageService=function(e){const t=i.getLanguageService(Object.assign(Object.assign({},e),{})),n=t.doValidation.bind(t),o=t.doComplete.bind(t);return t.configure({validate:!0,allowComments:!1,schemas:[{uri:"asl",fileMatch:["*"],schema:s.default}]}),t.doValidation=function(e,t,o){return r(this,void 0,void 0,(function*(){const r=(yield n(e,t,o)).map(e=>"asl"!==e.source?Object.assign(Object.assign({},e),{severity:i.DiagnosticSeverity.Error}):e),s=t.root;if(s&&a.isObjectNode(s)){const t=u.default(s,e,!0);return r.concat(t)}return r}))},t.doComplete=function(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield o(e,t,n);return c.default(e,t,n,r)}))},t}},191:function(e){e.exports=JSON.parse('{"type":"object","properties":{"Version":{"type":"string","description":"The version of the Amazon States Language used in the state machine.","enum":["1.0"]},"Comment":{"type":"string","description":"A human-readable comment or description.","minLength":1},"TimeoutSeconds":{"description":"The maximum number of seconds an execution of the state machine can run. If it runs longer than the specified time, the execution fails with a States.Timeout error.","type":"integer","minimum":0,"maximum":99999999},"StartAt":{"type":"string","description":"A string that must exactly match (is case sensitive) the name of a state.","minLength":1},"States":{"type":"object","description":"An object containing a comma-delimited set of states.","additionalProperties":{"oneOf":[{"description":"A Pass state passes its input to its output, without performing work. Pass states are useful when constructing and debugging state machines.","allOf":[{"type":"object","properties":{"Type":{"type":"string","description":"The state\'s type.","minLength":1,"enum":["Pass","Succeed","Fail","Task","Choice","Wait","Parallel","Map"]},"Comment":{"type":"string","description":"A human-readable comment or description of the state.","minLength":1}},"required":["Type"]},{"properties":{"InputPath":{"description":"A path that selects a portion of the state\'s input to be passed to the state\'s task for processing. If omitted, it has the value $ which designates the entire input.","oneOf":[{"type":"string"},{"type":"null"}]},"ResultPath":{"description":"A path that specifies where to place the Result, relative to the raw input. If the raw input has a field at the location addressed by the ResultPath value then in the output that field is discarded and overwritten by the state\'s result. Otherwise, a new field is created in the state output, with intervening fields constructed as necessary.","oneOf":[{"type":"string","minLength":1},{"type":"null"}]},"OutputPath":{"description":"A path that selects a portion of the state\'s input to be passed to the state\'s output. If omitted, it has the value $ which designates the entire input.","oneOf":[{"type":"string"},{"type":"null"}]}}},{"oneOf":[{"required":["Next"]},{"required":["End"]}],"properties":{"Next":{"type":"string","description":"The name of the next state that is run when the current state finishes.","minLength":1},"End":{"type":"boolean","description":"Designates this state as a terminal state (ends the execution) if set to true. There can be any number of terminal states per state machine."}}},{"properties":{"Type":{"enum":["Pass"]},"Parameters":{"description":"A collection of key-value pairs that will be passed as input to the next state. Values can be static, or selected from the input to the current state using JsonPath.","type":"object"}}}]},{"description":"A Succeed state stops an execution successfully. The Succeed state is a useful target for Choice state branches that don\'t do anything but stop the execution.","allOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/0"},{"properties":{"InputPath":{"description":"A path that selects a portion of the state\'s input to be passed to the state\'s task for processing. If omitted, it has the value $ which designates the entire input.","oneOf":[{"type":"string"},{"type":"null"}]},"OutputPath":{"description":"A path that selects a portion of the state\'s input to be passed to the state\'s output. If omitted, it has the value $ which designates the entire input.","oneOf":[{"type":"string"},{"type":"null"}]}}},{"properties":{"Type":{"enum":["Succeed"]}}}]},{"description":"A Fail state stops the execution of the state machine and marks it as a failure.","allOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/0"},{"properties":{"Type":{"enum":["Fail"]},"Comment":{"$ref":"#/properties/Comment"},"Error":{"type":"string","description":"Provides an error name that can be used for error handling (Retry/Catch), operational, or diagnostic purposes.","minLength":1},"Cause":{"type":"string","description":"Provides a custom failure string that can be used for operational or diagnostic purposes.","minLength":1}}}]},{"description":"A Task state represents a single unit of work performed by a state machine.\\nAll work in your state machine is done by tasks. A task performs work identified by the stateâ€™s Resource field, which is often an AWS Lambda function or other Step Functions service integrations.","allOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/0"},{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1"},{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/2"},{"properties":{"Type":{"enum":["Task"]},"Resource":{"type":"string","description":"A URI, especially an ARN that uniquely identifies the specific task to execute.","examples":["arn:aws:states:::batch:submitJob","arn:aws:states:::batch:submitJob.sync","arn:aws:states:::dynamodb:deleteItem","arn:aws:states:::dynamodb:getItem","arn:aws:states:::dynamodb:putItem","arn:aws:states:::dynamodb:updateItem","arn:aws:states:::ecs:runTask","arn:aws:states:::ecs:runTask.sync","arn:aws:states:::ecs:runTask.waitForTaskToken","arn:aws:states:::elasticmapreduce:addStep","arn:aws:states:::elasticmapreduce:addStep.sync","arn:aws:states:::elasticmapreduce:cancelStep","arn:aws:states:::elasticmapreduce:createCluster","arn:aws:states:::elasticmapreduce:createCluster.sync","arn:aws:states:::elasticmapreduce:modifyInstanceFleetByName","arn:aws:states:::elasticmapreduce:modifyInstanceGroupByName","arn:aws:states:::elasticmapreduce:setClusterTerminationProtection","arn:aws:states:::elasticmapreduce:terminateCluster","arn:aws:states:::elasticmapreduce:terminateCluster.sync","arn:aws:states:::glue:startJobRun","arn:aws:states:::glue:startJobRun.sync","arn:aws:states:::lambda:invoke","arn:aws:states:::lambda:invoke.waitForTaskToken","arn:aws:states:::sagemaker:createEndpoint","arn:aws:states:::sagemaker:createEndpointConfig","arn:aws:states:::sagemaker:createHyperParameterTuningJob","arn:aws:states:::sagemaker:createHyperParameterTuningJob.sync","arn:aws:states:::sagemaker:createLabelingJob","arn:aws:states:::sagemaker:createLabelingJob.sync","arn:aws:states:::sagemaker:createModel","arn:aws:states:::sagemaker:createTrainingJob","arn:aws:states:::sagemaker:createTrainingJob.sync","arn:aws:states:::sagemaker:createTransformJob","arn:aws:states:::sagemaker:createTransformJob.sync","arn:aws:states:::sagemaker:updateEndpoint","arn:aws:states:::sns:publish","arn:aws:states:::sns:publish.waitForTaskToken","arn:aws:states:::sqs:sendMessage","arn:aws:states:::sqs:sendMessage.waitForTaskToken","arn:aws:states:::states:startExecution","arn:aws:states:::states:startExecution.sync","arn:aws:states:::states:startExecution.waitForTaskToken"]},"Parameters":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/3/properties/Parameters","description":"Used to pass information to the API actions of connected resources. The parameters can use a mix of static JSON and JsonPath."},"TimeoutSeconds":{"$ref":"#/properties/TimeoutSeconds","description":"If the task runs longer than the specified seconds, this state fails with a States.Timeout error name. Must be a positive, non-zero integer. If not provided, the default value is 99999999. The count begins after the task has been started, for example, when ActivityStarted or LambdaFunctionStarted are logged in the Execution event history."},"HeartbeatSeconds":{"$ref":"#/properties/TimeoutSeconds","description":"If more time than the specified seconds elapses between heartbeats from the task, this state fails with a States.Timeout error name. Must be a positive, non-zero integer less than the number of seconds specified in the TimeoutSeconds field. If not provided, the default value is 99999999. For Activities, the count begins when GetActivityTask receives a token and ActivityStarted is logged in the Execution event history."},"Retry":{"description":"An array of objects, called Retriers, that define a retry policy if the state encounters runtime errors.","type":"array","items":{"type":"object","properties":{"ErrorEquals":{"description":"A non-empty array of Error Names. The retry policy for this Retrier is implemented if the reported error matches one of the Error Names.","type":"array","minItems":1,"items":{"type":"string"}},"IntervalSeconds":{"$ref":"#/properties/TimeoutSeconds","description":"A positive integer representing the number of seconds before the first retry attempt. (Default: 1)"},"MaxAttempts":{"type":"integer","description":"A non-negative integer representing the maximum number of retry attempts. (Default: 3)","minimum":0},"BackoffRate":{"type":"number","description":"A number (>= 1) which is the multiplier that increases the retry interval on each attempt. (Default: 2.0)","minimum":1}},"required":["ErrorEquals"]}},"Catch":{"description":"An array of objects, called Catchers, that define a fallback state. This state is executed if the state encounters runtime errors and its retry policy is exhausted or isn\'t defined.","type":"array","items":{"type":"object","properties":{"ErrorEquals":{"$ref":"#/properties/States/additionalProperties/oneOf/3/allOf/3/properties/Retry/items/properties/ErrorEquals","description":"A non-empty array of Error Names. The state machine transitions to this Catcher\'s fallback state if the reported error matches one of the Error Names."},"Next":{"type":"string","description":"The state to transition to on Error Name match.","minLength":1},"ResultPath":{"oneOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0","description":"A path that specifies where to place the Result, relative to the raw input. If the raw input has a field at the location addressed by the ResultPath value then in the output that field is discarded and overwritten by the state\'s result. Otherwise, a new field is created in the state output, with intervening fields constructed as necessary."},{"type":"null"}]}},"required":["ErrorEquals","Next"]}}},"required":["Resource"]}]},{"description":"A Choice state adds branching logic to a state machine.","allOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/0"},{"$ref":"#/properties/States/additionalProperties/oneOf/1/allOf/1"},{"properties":{"Type":{"enum":["Choice"]},"Choices":{"type":"array","description":"An array of Choice Rules that determines which state the state machine transitions to next.","minItems":1,"items":{"oneOf":[{"type":"object","properties":{"StringEquals":{"type":"string"},"Variable":{"type":"string","description":"A reference path specifying the input value to apply the comparison operator to.","minLength":1},"Next":{"type":"string","description":"The state to transition to if there is an exact match between the input value and the comparison operator for this Choice Rule.","minLength":1}},"required":["StringEquals","Variable","Next"]},{"type":"object","properties":{"StringGreaterThan":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["StringGreaterThan","Variable","Next"]},{"type":"object","properties":{"StringGreaterThanEquals":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["StringGreaterThanEquals","Variable","Next"]},{"type":"object","properties":{"StringLessThan":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["StringLessThan","Variable","Next"]},{"type":"object","properties":{"StringLessThanEquals":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["StringLessThanEquals","Variable","Next"]},{"type":"object","properties":{"NumericEquals":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["NumericEquals","Variable","Next"]},{"type":"object","properties":{"NumericGreaterThan":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["NumericGreaterThan","Variable","Next"]},{"type":"object","properties":{"NumericGreaterThanEquals":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["NumericGreaterThanEquals","Variable","Next"]},{"type":"object","properties":{"NumericLessThan":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["NumericLessThan","Variable","Next"]},{"type":"object","properties":{"NumericLessThanEquals":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["NumericLessThanEquals","Variable","Next"]},{"type":"object","properties":{"BooleanEquals":{"type":"boolean"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["BooleanEquals","Variable","Next"]},{"type":"object","properties":{"TimestampEquals":{"type":"string","format":"date-time"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["TimestampEquals","Variable","Next"]},{"type":"object","properties":{"TimestampGreaterThan":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["TimestampGreaterThan","Variable","Next"]},{"type":"object","properties":{"TimestampGreaterThanEquals":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["TimestampGreaterThanEquals","Variable","Next"]},{"type":"object","properties":{"TimestampLessThan":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["TimestampLessThan","Variable","Next"]},{"type":"object","properties":{"TimestampLessThanEquals":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["TimestampLessThanEquals","Variable","Next"]},{"type":"object","properties":{"And":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/17/properties/Or"},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["And","Next"]},{"type":"object","properties":{"Or":{"type":"array","minItems":1,"items":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/18/properties/Not"}},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["Or","Next"]},{"type":"object","properties":{"Not":{"oneOf":[{"type":"object","properties":{"StringEquals":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["StringEquals","Variable"]},{"type":"object","properties":{"StringLessThan":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["StringLessThan","Variable"]},{"type":"object","properties":{"StringGreaterThan":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["StringGreaterThan","Variable"]},{"type":"object","properties":{"StringLessThanEquals":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["StringLessThanEquals","Variable"]},{"type":"object","properties":{"StringGreaterThanEquals":{"type":"string"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["StringGreaterThanEquals","Variable"]},{"type":"object","properties":{"NumericEquals":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["NumericEquals","Variable"]},{"type":"object","properties":{"NumericLessThan":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["NumericLessThan","Variable"]},{"type":"object","properties":{"NumericGreaterThan":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["NumericGreaterThan","Variable"]},{"type":"object","properties":{"NumericLessThanEquals":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["NumericLessThanEquals","Variable"]},{"type":"object","properties":{"NumericGreaterThanEquals":{"type":"number"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Variable"}},"required":["NumericGreaterThanEquals","Variable"]},{"type":"object","properties":{"BooleanEquals":{"type":"boolean"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0"}},"required":["BooleanEquals","Variable"]},{"type":"object","properties":{"TimestampEquals":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0"}},"required":["TimestampEquals","Variable"]},{"type":"object","properties":{"TimestampLessThan":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0"}},"required":["TimestampLessThan","Variable"]},{"type":"object","properties":{"TimestampGreaterThan":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0"}},"required":["TimestampGreaterThan","Variable"]},{"type":"object","properties":{"TimestampLessThanEquals":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0"}},"required":["TimestampLessThanEquals","Variable"]},{"type":"object","properties":{"TimestampGreaterThanEquals":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals"},"Variable":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0"}},"required":["TimestampGreaterThanEquals","Variable"]},{"type":"object","properties":{"And":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/17/properties/Or"}},"required":["And"]},{"type":"object","properties":{"Or":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/17/properties/Or"}},"required":["Or"]},{"type":"object","properties":{"Not":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/18/properties/Not"}},"required":["Not"]}]},"Next":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/0/properties/Next"}},"required":["Not","Next"]}]},"additionalItems":false},"Default":{"type":"string","description":"The name of the state to transition to if none of the Choice Rules match."}},"required":["Choices"]}]},{"description":"A Wait state delays the state machine from continuing for a specified time. You can choose either a relative time, specified in seconds from when the state begins, or an absolute end time, specified as a timestamp.","allOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/0"},{"$ref":"#/properties/States/additionalProperties/oneOf/1/allOf/1"},{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/2"},{"properties":{"Type":{"enum":["Wait"]},"Seconds":{"$ref":"#/properties/TimeoutSeconds","description":"A time, in seconds, to wait before beginning the state specified in the \\"Next\\" field."},"Timestamp":{"$ref":"#/properties/States/additionalProperties/oneOf/4/allOf/2/properties/Choices/items/oneOf/11/properties/TimestampEquals","description":"An absolute time to wait until beginning the state specified in the \\"Next\\" field.\\n\\nTimestamps must conform to the RFC3339 profile of ISO 8601, with the further restrictions that an uppercase T must separate the date and time portions, and an uppercase Z must denote that a numeric time zone offset is not present, for example, 2016-08-18T17:33:00Z."},"SecondsPath":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0","description":"A time, in seconds, to wait before beginning the state specified in the \\"Next\\" field, specified using a path from the state\'s input data."},"TimestampPath":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0","description":"An absolute time to wait until beginning the state specified in the \\"Next\\" field, specified using a path from the state\'s input data."}},"oneOf":[{"required":["Type","Seconds"]},{"required":["Type","Timestamp"]},{"required":["Type","SecondsPath"]},{"required":["Type","TimestampPath"]}]}]},{"description":"The Parallel state can be used to create parallel branches of execution in your state machine.","allOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/0"},{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1"},{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/2"},{"properties":{"Type":{"enum":["Parallel"]},"Parameters":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/3/properties/Parameters","description":"A collection of key-value pairs that will be passed as input. Values can be static, or selected from the input with a path."},"Branches":{"type":"array","description":"An array of objects that specifies state machines to execute in parallel.","minItems":1,"items":{"type":"object","properties":{"StartAt":{"type":"string","description":"A string that must exactly match (is case sensitive) the name of one of the state objects."},"States":{"$ref":"#/properties/States"}},"required":["StartAt","States"]}},"Retry":{"$ref":"#/properties/States/additionalProperties/oneOf/3/allOf/3/properties/Retry","description":"Contains an array of objects, called Retriers, that define a retry policy if the state encounters runtime errors."},"Catch":{"$ref":"#/properties/States/additionalProperties/oneOf/3/allOf/3/properties/Catch","description":"Contains an array of objects, called Catchers, that define a fallback state. This state is executed if the state encounters runtime errors and its retry policy is exhausted or isn\'t defined."}},"required":["Branches"]}]},{"description":"The Map state can be used to run a set of steps for each element of an input array. While the Parallel state executes multiple branches of steps using the same input, a Map state will execute the same steps for multiple entries of an array in the state input.","allOf":[{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/0"},{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1"},{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/2"},{"properties":{"Type":{"enum":["Map"]},"Parameters":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/3/properties/Parameters","description":"A collection of key-value pairs that will be passed as input. Values can be static, or selected from the input with a path."},"ItemsPath":{"$ref":"#/properties/States/additionalProperties/oneOf/0/allOf/1/properties/ResultPath/oneOf/0","description":"Reference path identifying where in the effective input the array field is found."},"Iterator":{"type":"object","description":"A state machine which will process each element of the array.","properties":{"StartAt":{"type":"string","description":"A string that must exactly match (is case sensitive) the name of one of the state objects.","minLength":1},"States":{"$ref":"#/properties/States"}},"required":["StartAt","States"]},"MaxConcurrency":{"type":"integer","description":"Provides an upper bound on how many invocations of the Iterator may run in parallel.\\n\\nThe default value is 0, which places no limit on parallelism and iterations are invoked as concurrently as possible.","minimum":0},"Retry":{"$ref":"#/properties/States/additionalProperties/oneOf/3/allOf/3/properties/Retry","description":"Contains an array of objects, called Retriers, that define a retry policy if the state encounters runtime errors."},"Catch":{"$ref":"#/properties/States/additionalProperties/oneOf/3/allOf/3/properties/Catch","description":"Contains an array of objects, called Catchers, that define a fallback state. This state is executed if the state encounters runtime errors and its retry policy is exhausted or isn\'t defined."}},"required":["ItemsPath","Iterator"]}]}]}}},"required":["States","StartAt"]}')},192:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(36),i=r(n(193)),s=r(n(196));t.default=function(e,t,n,r){var a;const c=e.offsetAt(t),u=n.root;if(!u)return{isIncomplete:!1,items:[]};const l=o.findNodeAtLocation(u,c),f=i.default(l);let p=null!==(a=s.default(l,c,e))&&void 0!==a?a:r;return(null==p?void 0:p.items)?p.items=p.items.concat(f):p={isIncomplete:!1,items:f},p.items.map((e,t)=>Object.assign(Object.assign({},e),{sortText:t.toString()})),p}},193:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(45),i=n(36),s=r(n(194)),a=r(n(195)),c=["Task","Parallel","Map"];function u(e){return e.map(e=>{const t=o.CompletionItem.create(e.name);return t.kind=o.CompletionItemKind.Snippet,t.insertTextFormat=o.InsertTextFormat.Snippet,t.insertText=e.body.join("\n"),t.documentation=e.description,t})}t.stateSnippets=u(a.default),t.errorHandlingSnippets=u(s.default),t.default=function(e){if(e){if(i.isChildOfStates(e))return t.stateSnippets;if(i.insideStateNode(e)&&function(e){var t;let n;return i.isObjectNode(e)&&(n=i.findPropChildByName(e,"Type")),c.includes(null===(t=null==n?void 0:n.valueNode)||void 0===t?void 0:t.value)}(e))return t.errorHandlingSnippets}return[]}},194:function(e){e.exports=JSON.parse('[{"name":"Retry","body":["\\"Retry\\": [","\\t{","\\t\\t\\"ErrorEquals\\": [","\\t\\t\\t\\"ErrorA\\",","\\t\\t\\t\\"ErrorB\\"","\\t\\t],","\\t\\t\\"IntervalSeconds\\": 1,","\\t\\t\\"BackoffRate\\": 2,","\\t\\t\\"MaxAttempts\\": 2","\\t},","\\t{","\\t\\t\\"ErrorEquals\\": [","\\t\\t\\t\\"ErrorC\\"","\\t\\t],","\\t\\t\\"IntervalSeconds\\": 5","\\t}","]"],"description":"Code snippet for a Retry field.\\n\\nUse a Retry field to retry a task state after an error occurs."},{"name":"Catch","body":["\\"Catch\\": [","\\t{","\\t\\t\\"ErrorEquals\\": [","\\t\\t\\t\\"${2:States.ALL}\\"","\\t\\t],","\\t\\t\\"Next\\": \\"${1:NextState}\\"","\\t}","]"],"description":"Code snippet for a Catch field.\\n\\nUse a Catch field to catch errors and revert to a fallback state."}]')},195:function(e){e.exports=JSON.parse('[{"name":"Pass State","body":["\\"${1:PassState}\\": {","\\t\\"Type\\": \\"Pass\\",","\\t\\"Result\\": {","\\t\\t\\"data1\\": 0.5,","\\t\\t\\"data2\\": 1.5","\\t},","\\t\\"ResultPath\\": \\"\\\\$.result\\",","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for a Pass state.\\n\\nA Pass state passes its input to its output, without performing work."},{"name":"Lambda Task State","body":["\\"${1:Invoke Lambda function}\\": {","\\t\\"Type\\": \\"Task\\",","\\t\\"Resource\\": \\"arn:aws:states:::lambda:invoke\\",","\\t\\"Parameters\\": {","\\t\\t\\"FunctionName\\": \\"${3:arn:aws:lambda:REGION:ACCOUNT_ID:function:FUNCTION_NAME}\\",","\\t\\t\\"Payload\\": {","\\t\\t\\t\\"Input.\\\\$\\": \\"\\\\$\\"","\\t\\t}","\\t},","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for a Lambda Task state.\\n\\nCalls the AWS Lambda Invoke API to invoke a function."},{"name":"SNS Task State","body":["\\"${1:Send message to SNS}\\": {","\\t\\"Type\\": \\"Task\\",","\\t\\"Resource\\": \\"arn:aws:states:::sns:publish\\",","\\t\\"Parameters\\": {","\\t\\t\\"TopicArn\\": \\"${3:arn:aws:sns:REGION:ACCOUNT_ID:myTopic}\\",","\\t\\t\\"Message\\": {","\\t\\t\\t\\"Input\\": \\"${4:Hello from Step Functions!}\\"","\\t\\t}","\\t},","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for an SNS Publish Task state.\\n\\nCalls the Amazon SNS Publish API to send a message to a destination."},{"name":"Batch Task State","body":["\\"${1:Manage Batch task}\\": {","\\t\\"Type\\": \\"Task\\",","\\t\\"Resource\\": \\"arn:aws:states:::batch:submitJob.sync\\",","\\t\\"Parameters\\": {","\\t\\t\\"JobDefinition\\": \\"${3:arn:aws:batch:REGION:ACCOUNT_ID:job-definition/testJobDefinition}\\",","\\t\\t\\"JobName\\": \\"${4:myJobName}\\",","\\t\\t\\"JobQueue\\": \\"${5:arn:aws:batch:REGION:ACCOUNT_ID:job-queue/testQueue}\\"","\\t},","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for a Batch job Task state.\\n\\nCalls the AWS Batch SubmitJob API and resumes the execution once the job is complete."},{"name":"ECS Task State","body":["\\"${1:Manage ECS task}\\": {","\\t\\"Type\\": \\"Task\\",","\\t\\"Resource\\": \\"arn:aws:states:::ecs:runTask.sync\\",","\\t\\"Parameters\\": {","\\t\\t\\"LaunchType\\": \\"FARGATE\\",","\\t\\t\\"Cluster\\": \\"${3:arn:aws:ecs:REGION:ACCOUNT_ID:cluster/MyECSCluster}\\",","\\t\\t\\"TaskDefinition\\": \\"${4:arn:aws:ecs:REGION:ACCOUNT_ID:task-definition/MyTaskDefinition:1}\\"","\\t},","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for an ECS RunTask Task state.\\n\\nCalls the Amazon ECS RunTask API and resumes the execution once the ECS task is complete."},{"name":"SQS Task State","body":["\\"${1:Send message to SQS}\\": {","\\t\\"Type\\": \\"Task\\",","\\t\\"Resource\\": \\"arn:aws:states:::sqs:sendMessage\\",","\\t\\"Parameters\\": {","\\t\\t\\"QueueUrl\\": \\"${3:https://sqs.REGION.amazonaws.com/ACCOUNT_ID/myQueue}\\",","\\t\\t\\"MessageBody\\": {","\\t\\t\\t\\"Input\\": \\"${4:Hello from Step Functions!}\\"","\\t\\t}","\\t},","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for an SQS Publish Task state.\\n\\nCalls the Amazon SQS SendMessage API to send a message to a queue."},{"name":"Choice State","body":["\\"${1:ChoiceState}\\": {","\\t\\"Type\\": \\"Choice\\",","\\t\\"Choices\\": [","\\t\\t{","\\t\\t\\t\\"Variable\\": \\"\\\\$.${2:variable}\\",","\\t\\t\\t\\"BooleanEquals\\": true,","\\t\\t\\t\\"Next\\": \\"TrueState\\"","\\t\\t},","\\t\\t{","\\t\\t\\t\\"Variable\\": \\"\\\\$.${2:variable}\\",","\\t\\t\\t\\"BooleanEquals\\": false,","\\t\\t\\t\\"Next\\": \\"FalseState\\"","\\t\\t}","\\t],","\\t\\"Default\\": \\"${3:DefaultState}\\"","}"],"description":"Code snippet for a Choice state.\\n\\nA Choice state adds branching logic to a state machine."},{"name":"Wait State","body":["\\"${1:WaitState}\\": {","\\t\\"Type\\": \\"Wait\\",","\\t\\"Seconds\\": 10,","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for a Wait state.\\n\\nA Wait state delays the state machine from continuing for a specified time."},{"name":"Succeed State","body":["\\"${1:SuccessState}\\": {","\\t\\"Type\\": \\"Succeed\\"","}"],"description":"Code snippet for a Succeed state.\\n\\nA Succeed state stops an execution successfully."},{"name":"Fail State","body":["\\"${1:FailState}\\": {","\\t\\"Type\\": \\"Fail\\",","\\t\\"Cause\\": \\"${2:Invalid response.}\\",","\\t\\"Error\\": \\"${3:ErrorA}\\"","}"],"description":"Code snippet for a Fail state.\\n\\nA Fail state stops the execution of the state machine and marks it as a failure."},{"name":"Parallel State","body":["\\"${1:ParallelState}\\": {","\\t\\"Type\\": \\"Parallel\\",","\\t\\"Branches\\": [","\\t\\t{","\\t\\t\\t\\"StartAt\\": \\"State1\\",","\\t\\t\\t\\"States\\": {","\\t\\t\\t\\t\\"State1\\": {","\\t\\t\\t\\t\\t\\"Type\\": \\"Pass\\",","\\t\\t\\t\\t\\t\\"End\\": \\"True\\"","\\t\\t\\t\\t}","\\t\\t\\t}","\\t\\t},","\\t\\t{","\\t\\t\\t\\"StartAt\\": \\"State2\\",","\\t\\t\\t\\"States\\": {","\\t\\t\\t\\t\\"State2\\": {","\\t\\t\\t\\t\\t\\"Type\\": \\"Pass\\",","\\t\\t\\t\\t\\t\\"End\\": \\"True\\"","\\t\\t\\t\\t}","\\t\\t\\t}","\\t\\t}","\\t],","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for a Parallel state.\\n\\nA Parallel state can be used to create parallel branches of execution in your state machine."},{"name":"Map State","body":["\\"${1:MapState}\\": {","\\t\\"Type\\": \\"Map\\",","\\t\\"ItemsPath\\": \\"\\\\$.array\\",","\\t\\"MaxConcurrency\\": 0,","\\t\\"Iterator\\": {","\\t\\t\\"StartAt\\": \\"Pass\\",","\\t\\t\\"States\\": {","\\t\\t\\t\\"Pass\\": {","\\t\\t\\t\\t\\"Type\\": \\"Pass\\",","\\t\\t\\t\\t\\"Result\\": \\"Done!\\",","\\t\\t\\t\\t\\"End\\": \\"True\\"","\\t\\t\\t}","\\t\\t}","\\t},","\\t\\"ResultPath\\": \\"\\\\$.output\\",","\\t\\"Next\\": \\"${2:NextState}\\"","}"],"description":"Code snippet for a Map state.\\n\\nThe Map state can be used to run a set of steps for each element of an input array. While the Parallel state executes multiple branches of steps using the same input, a Map state will execute the same steps for multiple entries of an array in the state input."}]')},196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(45),o=n(36);function i(e){var t,n,r;switch(e.keyNode.value){case"StartAt":return function(e){if("StartAt"===e.keyNode.value&&e.parent&&o.isObjectNode(e.parent)){const t=e.parent.properties.find(e=>"States"===e.keyNode.value);if(t)return o.getListOfStateNamesFromStateNode(t)}return[]}(e);case"Next":case"Default":{const i=o.findClosestAncestorStateNode(e),s=null===(t=e.parent)||void 0===t?void 0:t.parent;let a;return s&&o.isPropertyNode(s)?a=s.keyNode.value:(null===(r=null===(n=null==s?void 0:s.parent)||void 0===n?void 0:n.parent)||void 0===r?void 0:r.parent)&&o.isPropertyNode(s.parent.parent.parent)&&(a=s.parent.parent.parent.keyNode.value),i?o.getListOfStateNamesFromStateNode(i).filter(e=>e!==a):[]}default:return[]}}function s(e,t,n,o,i){return{isIncomplete:!1,items:e.map(e=>{const s=r.CompletionItem.create(e);return s.commitCharacters=[","],s.kind=r.CompletionItemKind.Value,s.textEdit=r.TextEdit.replace(t,`${o?" ":""}${n?'"':""}${e}"${i?",":""}`),s.filterText=e,s})}}t.default=function(e,t,n){if(e&&o.isPropertyNode(e)&&e.colonOffset){const t=i(e);if(t.length){const o=n.positionAt(e.colonOffset+1);let i=n.positionAt(e.offset+e.length);return o.line!==i.line&&(i=o),s(t,r.Range.create(o,i),!0,!0,!0)}}if(e&&e.parent&&o.isPropertyNode(e.parent)){const a=e.parent;if(o.isStringNode(e)){const o=i(a);if(o.length){const i=n.positionAt(e.offset+1),a=n.positionAt(e.offset+e.length);return s(o,r.Range.create(i,a),t===e.offset)}}}}},197:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(45),i=n(36),s=n(114),a=r(n(115)),c=r(n(198)),u=r(n(80));function l(e,t,n,r){var i;const s=t.includes(null===(i=null==e?void 0:e.valueNode)||void 0===i?void 0:i.value);if(e&&e.valueNode&&!s){const{length:t,offset:i}=e.valueNode,s=o.Range.create(n.positionAt(i),n.positionAt(i+t));return o.Diagnostic.create(s,r,o.DiagnosticSeverity.Error)}}function f(e,t,n,r){const o=i.findPropChildByName(t,e),a=[],c={};return(null==o?void 0:o.valueNode)&&i.isArrayNode(o.valueNode)&&o.valueNode.items.forEach(e=>{var t;if(i.isObjectNode(e)){const o=i.findPropChildByName(e,"Next"),u=null===(t=null==o?void 0:o.valueNode)||void 0===t?void 0:t.value,f=l(o,n,r,s.MESSAGES.INVALID_NEXT);f?a.push(f):"string"==typeof u&&(c[u]=!0)}}),{diagnostics:a,reachedStates:c}}t.default=function e(t,n,r){var p,d;const h=i.findPropChildByName(t,"States"),m=i.findPropChildByName(t,"StartAt"),g=r?u.default.Root:u.default.NestedRoot;let y=[];if(t.properties.forEach(e=>{const t=e.keyNode.value;g[t]||y.push(a.default(e,n,s.MESSAGES.INVALID_PROPERTY_NAME))}),h){const t=i.getListOfStateNamesFromStateNode(h),r=h.valueNode;if(m){const e=t.includes(null===(p=m.valueNode)||void 0===p?void 0:p.value);if(m.valueNode&&!e){const{length:e,offset:t}=m.valueNode,r=o.Range.create(n.positionAt(t),n.positionAt(t+e));y.push(o.Diagnostic.create(r,s.MESSAGES.INVALID_START_AT,o.DiagnosticSeverity.Error))}}if(r&&i.isObjectNode(r)){const a={};let u={},p=!1;const g=null===(d=null==m?void 0:m.valueNode)||void 0===d?void 0:d.value;if("string"==typeof g&&(u[g]=!0),r.properties.forEach(r=>{var o,d,h,m,g;const v=r.valueNode;if(v&&i.isObjectNode(v)){y=y.concat(c.default(v,n));const b=i.findPropChildByName(v,"Next"),S=i.findPropChildByName(v,"End"),T=null===(d=null===(o=v.properties.find(e=>"Type"===e.keyNode.value))||void 0===o?void 0:o.valueNode)||void 0===d?void 0:d.value,C=null===(h=null==b?void 0:b.valueNode)||void 0===h?void 0:h.value,x=r.keyNode.value;switch(S&&!0===(null===(m=S.valueNode)||void 0===m?void 0:m.value)&&(p=!0),u[x]||(a[x]=r),"string"==typeof C&&(u[C]=!0,delete a[C]),T){case"Map":{const t=i.findPropChildByName(v,"Iterator");t&&t.valueNode&&i.isObjectNode(t.valueNode)&&(y=[...y,...e(t.valueNode,n)]);break}case"Parallel":{const r=i.findPropChildByName(v,"Branches"),o=f("Catch",v,t,n);y=y.concat(o.diagnostics),u=Object.assign(Object.assign({},u),o.reachedStates),r&&r.valueNode&&i.isArrayNode(r.valueNode)&&r.valueNode.children.forEach(t=>{i.isObjectNode(t)&&(y=[...y,...e(t,n)])});break}case"Task":{const e=f("Catch",v,t,n);y=y.concat(e.diagnostics),u=Object.assign(Object.assign({},u),e.reachedStates);break}case"Choice":{const e=i.findPropChildByName(v,"Default"),r=null===(g=null==e?void 0:e.valueNode)||void 0===g?void 0:g.value,o=l(e,t,n,s.MESSAGES.INVALID_DEFAULT);o?y.push(o):"string"==typeof r&&(u[r]=!0,delete a[r]);const c=f("Choices",v,t,n);y=y.concat(c.diagnostics),u=Object.assign(Object.assign({},u),c.reachedStates);break}case"Succeed":case"Fail":p=!0}const O=l(b,t,n,s.MESSAGES.INVALID_NEXT);O&&y.push(O)}}),!p){const{length:e,offset:t}=h.keyNode,r=o.Range.create(n.positionAt(t),n.positionAt(t+e));y.push(o.Diagnostic.create(r,s.MESSAGES.NO_TERMINAL_STATE,o.DiagnosticSeverity.Error))}Object.values(a).forEach(e=>{const{length:t,offset:r}=e.keyNode,i=o.Range.create(n.positionAt(r),n.positionAt(r+t));y.push(o.Diagnostic.create(i,s.MESSAGES.UNREACHABLE_STATE,o.DiagnosticSeverity.Error))})}}return y}},198:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(36),i=r(n(199)),s=r(n(80));t.default=function(e,t){var n,r,a,c;const u=null===(r=null===(n=o.findPropChildByName(e,"Type"))||void 0===n?void 0:n.valueNode)||void 0===r?void 0:r.value,l=[];if("string"==typeof u){const n=!!(null===(a=s.default.StateTypes[u])||void 0===a?void 0:a.hasCommonProperties),r=null===(c=s.default.StateTypes[u])||void 0===c?void 0:c.Properties;if(!r)return;const o=n?Object.assign(Object.assign({},s.default.Common),r):Object.assign({},r);l.push(...i.default(e,t,o))}return l}},199:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(36),i=r(n(115)),s=n(114),a=r(n(80)).default.ReferenceTypes;function c(e){return e===Object(e)}function u(e,t,n){const r=n["Fn:ArrayOf"],l=n["Fn:OneOf"],f=n["Fn:ValueOf"];if("string"==typeof r&&o.isArrayNode(e))return function(e,t,n){const r=a[n];let i=[];return c(r)&&e.items.forEach(e=>{o.isObjectNode(e)&&(i=i.concat(u(e,t,r)))}),i}(e,t,r);if("string"==typeof l&&o.isObjectNode(e))return function(e,t,n,r){const o=a[r],l=[];let f=[];if(e.properties.forEach(e=>{const r=e.keyNode.value,a=o[r];a?l.push({propNode:e,schemaValue:a}):n[r]||f.push(i.default(e,t,s.MESSAGES.INVALID_PROPERTY_NAME))}),l.length>1)l.forEach(e=>{f.push(i.default(e.propNode,t,s.MESSAGES.MUTUALLY_EXCLUSIVE_CHOICE_PROPERTIES))});else if(l.length){const{schemaValue:e,propNode:n}=l[0],{valueNode:r}=n;c(e)&&(f=f.concat(u(r,t,e)))}return f}(e,t,n,l);if("string"==typeof f&&o.isObjectNode(e)){return u(e,t,a[f])}return o.isObjectNode(e)?function(e,t,n){const r=[];return n.properties&&(n=n.properties),e.properties.forEach(e=>{const o=e.keyNode.value,a=n[o];a?c(a)&&r.push(...u(e.valueNode,t,a)):r.push(i.default(e,t,s.MESSAGES.INVALID_PROPERTY_NAME))}),r}(e,t,n):[]}t.default=u},2:function(e,t){e.exports=require("path")},20:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const o=n(51),i=n(252);t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.RequestType1=i.RequestType1,t.RequestType2=i.RequestType2,t.RequestType3=i.RequestType3,t.RequestType4=i.RequestType4,t.RequestType5=i.RequestType5,t.RequestType6=i.RequestType6,t.RequestType7=i.RequestType7,t.RequestType8=i.RequestType8,t.RequestType9=i.RequestType9,t.ResponseError=i.ResponseError,t.ErrorCodes=i.ErrorCodes,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.NotificationType1=i.NotificationType1,t.NotificationType2=i.NotificationType2,t.NotificationType3=i.NotificationType3,t.NotificationType4=i.NotificationType4,t.NotificationType5=i.NotificationType5,t.NotificationType6=i.NotificationType6,t.NotificationType7=i.NotificationType7,t.NotificationType8=i.NotificationType8,t.NotificationType9=i.NotificationType9;const s=n(83);t.MessageReader=s.MessageReader,t.StreamMessageReader=s.StreamMessageReader,t.IPCMessageReader=s.IPCMessageReader,t.SocketMessageReader=s.SocketMessageReader;const a=n(84);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=n(64);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const u=n(253);t.CancellationTokenSource=u.CancellationTokenSource,t.CancellationToken=u.CancellationToken;const l=n(254);var f,p,d,h,m,g,y,v;r(n(255)),r(n(256)),function(e){e.type=new i.NotificationType("$/cancelRequest")}(f||(f={})),function(e){e.type=new i.NotificationType("$/progress")}(p||(p={}));t.ProgressType=class{constructor(){}},t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(d=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){if(!o.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(d=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new i.NotificationType("$/setTraceNotification")}(m=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new i.NotificationType("$/logTraceNotification")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(y=t.ConnectionErrors||(t.ConnectionErrors={}));class b extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,b.prototype)}}function S(e,t,n,r){let s=0,a=0,S=0;let T,C,x=void 0,O=Object.create(null),k=void 0,R=Object.create(null),P=new Map,w=new l.LinkedMap,E=Object.create(null),N=Object.create(null),_=d.Off,D=h.Text,A=v.New,q=new c.Emitter,I=new c.Emitter,M=new c.Emitter,j=new c.Emitter,F=new c.Emitter;function L(e){return"req-"+e.toString()}function $(e,t){var n;i.isRequestMessage(t)?e.set(L(t.id),t):i.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++S).toString():"res-"+n.toString(),t):e.set("not-"+(++a).toString(),t)}function V(e){}function W(){return A===v.Listening}function U(){return A===v.Closed}function H(){return A===v.Disposed}function B(){A!==v.New&&A!==v.Listening||(A=v.Closed,I.fire(void 0))}function z(){T||0===w.size||(T=setImmediate(()=>{T=void 0,function(){if(0===w.size)return;let e=w.shift();try{i.isRequestMessage(e)?function(e){if(H())return;function n(n,r,o){let s={jsonrpc:"2.0",id:e.id};n instanceof i.ResponseError?s.error=n.toJson():s.result=void 0===n?null:n,G(s,r,o),t.write(s)}function r(n,r,o){let i={jsonrpc:"2.0",id:e.id,error:n.toJson()};G(i,r,o),t.write(i)}!function(e){if(_===d.Off||!C)return;if(D===h.Text){let t=void 0;_===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Received request '${e.method} - (${e.id})'.`,t)}else J("receive-request",e)}(e);let s,a,c=O[e.method];c&&(s=c.type,a=c.handler);let l=Date.now();if(a||x){let c=new u.CancellationTokenSource,f=String(e.id);N[f]=c;try{let u;u=void 0===e.params||void 0!==s&&0===s.numberOfParams?a?a(c.token):x(e.method,c.token):o.array(e.params)&&(void 0===s||s.numberOfParams>1)?a?a(...e.params,c.token):x(e.method,...e.params,c.token):a?a(e.params,c.token):x(e.method,e.params,c.token);let p=u;u?p.then?p.then(t=>{delete N[f],n(t,e.method,l)},t=>{delete N[f],t instanceof i.ResponseError?r(t,e.method,l):t&&o.string(t.message)?r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(delete N[f],n(u,e.method,l)):(delete N[f],function(n,r,o){void 0===n&&(n=null);let i={jsonrpc:"2.0",id:e.id,result:n};G(i,r,o),t.write(i)}(u,e.method,l))}catch(t){delete N[f],t instanceof i.ResponseError?n(t,e.method,l):t&&o.string(t.message)?r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new i.ResponseError(i.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):i.isNotificationMessage(e)?function(e){if(H())return;let t,r=void 0;if(e.method===f.type.method)t=e=>{let t=e.id,n=N[String(t)];n&&n.cancel()};else{let n=R[e.method];n&&(t=n.handler,r=n.type)}if(t||k)try{!function(e){if(_===d.Off||!C||e.method===g.type.method)return;if(D===h.Text){let t=void 0;_===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Received notification '${e.method}'.`,t)}else J("receive-notification",e)}(e),void 0===e.params||void 0!==r&&0===r.numberOfParams?t?t():k(e.method):o.array(e.params)&&(void 0===r||r.numberOfParams>1)?t?t(...e.params):k(e.method,...e.params):t?t(e.params):k(e.method,e.params)}catch(t){t.message?n.error(`Notification handler '${e.method}' failed with message: ${t.message}`):n.error(`Notification handler '${e.method}' failed unexpectedly.`)}else M.fire(e)}(e):i.isResponseMessage(e)?function(e){if(H())return;if(null===e.id)e.error?n.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):n.error("Received response message without id. No further error information provided.");else{let t=String(e.id),r=E[t];if(function(e,t){if(_===d.Off||!C)return;if(D===h.Text){let n=void 0;if(_===d.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";C.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else C.log(`Received response ${e.id} without active response promise.`,n)}else J("receive-response",e)}(e,r),r){delete E[t];try{if(e.error){let t=e.error;r.reject(new i.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(e){e.message?n.error(`Response handler '${r.method}' failed with message: ${e.message}`):n.error(`Response handler '${r.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(o.string(t.id)||o.number(t.id)){let e=String(t.id),n=E[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{z()}}()}))}e.onClose(B),e.onError((function(e){q.fire([e,void 0,void 0])})),t.onClose(B),t.onError((function(e){q.fire(e)}));let K=e=>{try{if(i.isNotificationMessage(e)&&e.method===f.type.method){let n=L(e.params.id),o=w.get(n);if(i.isRequestMessage(o)){let i=r&&r.cancelUndispatched?r.cancelUndispatched(o,V):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return w.delete(n),i.id=o.id,G(i,e.method,Date.now()),void t.write(i)}}$(w,e)}finally{z()}};function G(e,t,n){if(_!==d.Off&&C)if(D===h.Text){let r=void 0;_===d.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),C.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else J("send-response",e)}function J(e,t){if(!C||_===d.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};C.log(n)}function X(){if(U())throw new b(y.Closed,"Connection is closed.");if(H())throw new b(y.Disposed,"Connection is disposed.")}function Q(e){return void 0===e?null:e}function Y(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=Q(t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(Q(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}let Z={sendNotification:(e,...n)=>{let r,i;if(X(),o.string(e))switch(r=e,n.length){case 0:i=null;break;case 1:i=n[0];break;default:i=n}else r=e.method,i=Y(e,n);let s={jsonrpc:"2.0",method:r,params:i};!function(e){if(_!==d.Off&&C)if(D===h.Text){let t=void 0;_===d.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),C.log(`Sending notification '${e.method}'.`,t)}else J("send-notification",e)}(s),t.write(s)},onNotification:(e,t)=>{X(),o.func(e)?k=e:t&&(o.string(e)?R[e]={type:void 0,handler:t}:R[e.method]={type:e,handler:t})},onProgress:(e,t,n)=>{if(P.has(t))throw new Error(`Progress handler for token ${t} already registered`);return P.set(t,n),{dispose:()=>{P.delete(t)}}},sendProgress:(e,t,n)=>{Z.sendNotification(p.type,{token:t,value:n})},onUnhandledProgress:j.event,sendRequest:(e,...n)=>{let r,a;X(),function(){if(!W())throw new Error("Call listen() first.")}();let c=void 0;if(o.string(e))switch(r=e,n.length){case 0:a=null;break;case 1:u.CancellationToken.is(n[0])?(a=null,c=n[0]):a=Q(n[0]);break;default:const e=n.length-1;u.CancellationToken.is(n[e])?(c=n[e],a=2===n.length?Q(n[0]):n.slice(0,e).map(e=>Q(e))):a=n.map(e=>Q(e))}else{r=e.method,a=Y(e,n);let t=e.numberOfParams;c=u.CancellationToken.is(n[t])?n[t]:void 0}let l=s++,p=new Promise((e,n)=>{let o={jsonrpc:"2.0",id:l,method:r,params:a},s={method:r,timerStart:Date.now(),resolve:e,reject:n};!function(e){if(_!==d.Off&&C)if(D===h.Text){let t=void 0;_===d.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),C.log(`Sending request '${e.method} - (${e.id})'.`,t)}else J("send-request",e)}(o);try{t.write(o)}catch(e){s.reject(new i.ResponseError(i.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),s=null}s&&(E[String(l)]=s)});return c&&c.onCancellationRequested(()=>{Z.sendNotification(f.type,{id:l})}),p},onRequest:(e,t)=>{X(),o.func(e)?x=e:t&&(o.string(e)?O[e]={type:void 0,handler:t}:O[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,i=h.Text;void 0!==n&&(o.boolean(n)?r=n:(r=n.sendNotification||!1,i=n.traceFormat||h.Text)),_=e,D=i,C=_===d.Off?void 0:t,!r||U()||H()||Z.sendNotification(m.type,{value:d.toString(e)})},onError:q.event,onClose:I.event,onUnhandledNotification:M.event,onDispose:F.event,dispose:()=>{if(H())return;A=v.Disposed,F.fire(void 0);let n=new Error("Connection got disposed.");Object.keys(E).forEach(e=>{E[e].reject(n)}),E=Object.create(null),N=Object.create(null),w=new l.LinkedMap,o.func(t.dispose)&&t.dispose(),o.func(e.dispose)&&e.dispose()},listen:()=>{X(),function(){if(W())throw new b(y.AlreadyListening,"Connection is already listening")}(),A=v.Listening,e.listen(K)},inspect:()=>{console.log("inspect")}};return Z.onNotification(g.type,e=>{_!==d.Off&&C&&C.log(e.message,_===d.Verbose?e.verbose:void 0)}),Z.onNotification(p.type,e=>{const t=P.get(e.token);t?t(e.value):j.fire(e)}),Z}t.ConnectionError=b,function(e){e.is=function(e){let t=e;return t&&o.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,n,r,o){var i;return r||(r=t.NullLogger),S(void 0!==(i=e).listen&&void 0===i.read?e:new s.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new a.StreamMessageWriter(n),r,o)}},252:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51);var o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.ContentModified=-32801,e.MessageWriteError=1,e.MessageReadError=2}(o=t.ErrorCodes||(t.ErrorCodes={}));class i extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:o.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,i.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=i;class s{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=s;t.RequestType0=class extends s{constructor(e){super(e,0)}};t.RequestType=class extends s{constructor(e){super(e,1)}};t.RequestType1=class extends s{constructor(e){super(e,1)}};t.RequestType2=class extends s{constructor(e){super(e,2)}};t.RequestType3=class extends s{constructor(e){super(e,3)}};t.RequestType4=class extends s{constructor(e){super(e,4)}};t.RequestType5=class extends s{constructor(e){super(e,5)}};t.RequestType6=class extends s{constructor(e){super(e,6)}};t.RequestType7=class extends s{constructor(e){super(e,7)}};t.RequestType8=class extends s{constructor(e){super(e,8)}};t.RequestType9=class extends s{constructor(e){super(e,9)}};t.NotificationType=class extends s{constructor(e){super(e,1),this._=void 0}};t.NotificationType0=class extends s{constructor(e){super(e,0)}};t.NotificationType1=class extends s{constructor(e){super(e,1)}};t.NotificationType2=class extends s{constructor(e){super(e,2)}};t.NotificationType3=class extends s{constructor(e){super(e,3)}};t.NotificationType4=class extends s{constructor(e){super(e,4)}};t.NotificationType5=class extends s{constructor(e){super(e,5)}};t.NotificationType6=class extends s{constructor(e){super(e,6)}};t.NotificationType7=class extends s{constructor(e){super(e,7)}};t.NotificationType8=class extends s{constructor(e){super(e,8)}};t.NotificationType9=class extends s{constructor(e){super(e,9)}},t.isRequestMessage=function(e){let t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(64),o=n(51);var i;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){let n=t;return n&&(n===e.None||n===e.Cancelled||o.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(i=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze((function(e,t){let n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=i.None}}},254:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={}));t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=r.None){let o=this._map.get(e);if(o)o.value=t,n!==r.None&&this.touch(o,n);else{switch(o={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(o);break;case r.First:this.addItemFirst(o);break;case r.Last:default:this.addItemLast(o)}this._map.set(e,o),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(12),i=n(13),s=n(50),a=n(83),c=n(84);t.generateRandomPipeName=function(){const e=i.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:r.join(o.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n,r=new Promise((e,t)=>{n=e});return new Promise((o,i)=>{let u=s.createServer(e=>{u.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])});u.on("error",i),u.listen(e,()=>{u.removeListener("error",i),o({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=s.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(50),o=n(83),i=n(84);t.createClientSocketTransport=function(e,t="utf-8"){let n,s=new Promise((e,t)=>{n=e});return new Promise((a,c)=>{let u=r.createServer(e=>{u.close(),n([new o.SocketMessageReader(e,t),new i.SocketMessageWriter(e,t)])});u.on("error",c),u.listen(e,"127.0.0.1",()=>{u.removeListener("error",c),a({onConnected:()=>s})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=r.createConnection(e,"127.0.0.1");return[new o.SocketMessageReader(n,t),new i.SocketMessageWriter(n,t)]}},257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(258),o=n(20),i=n(17),s=n(259);t.ImplementationRequest=s.ImplementationRequest;const a=n(260);t.TypeDefinitionRequest=a.TypeDefinitionRequest;const c=n(261);t.WorkspaceFoldersRequest=c.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=c.DidChangeWorkspaceFoldersNotification;const u=n(262);t.ConfigurationRequest=u.ConfigurationRequest;const l=n(263);t.DocumentColorRequest=l.DocumentColorRequest,t.ColorPresentationRequest=l.ColorPresentationRequest;const f=n(264);t.FoldingRangeRequest=f.FoldingRangeRequest;const p=n(265);t.DeclarationRequest=p.DeclarationRequest;const d=n(266);t.SelectionRangeRequest=d.SelectionRangeRequest;const h=n(267);var m,g;t.WorkDoneProgress=h.WorkDoneProgress,t.WorkDoneProgressCreateRequest=h.WorkDoneProgressCreateRequest,t.WorkDoneProgressCancelNotification=h.WorkDoneProgressCancelNotification,function(e){e.is=function(e){const t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(m=t.DocumentFilter||(t.DocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!m.is(t))return!1;return!0}}(g=t.DocumentSelector||(t.DocumentSelector={})),function(e){e.type=new i.ProtocolRequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new i.ProtocolRequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.hasId=function(e){const t=e;return t&&r.string(t.id)&&t.id.length>0}}(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||g.is(t.documentSelector))}}(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})),function(e){e.is=function(e){const t=e;return r.objectLiteral(t)&&(void 0===t.workDoneProgress||r.boolean(t.workDoneProgress))},e.hasWorkDoneProgress=function(e){const t=e;return t&&r.boolean(t.workDoneProgress)}}(t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})),function(e){e.type=new i.ProtocolRequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new i.ProtocolNotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new i.ProtocolRequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new i.ProtocolNotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new i.ProtocolNotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new i.ProtocolNotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new i.ProtocolRequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new i.ProtocolNotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new i.ProtocolNotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.method="textDocument/didOpen",e.type=new i.ProtocolNotificationType(e.method)}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.method="textDocument/didChange",e.type=new i.ProtocolNotificationType(e.method)}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.method="textDocument/didClose",e.type=new i.ProtocolNotificationType(e.method)}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.method="textDocument/didSave",e.type=new i.ProtocolNotificationType(e.method)}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})),function(e){e.method="textDocument/willSave",e.type=new i.ProtocolNotificationType(e.method)}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.method="textDocument/willSaveWaitUntil",e.type=new i.ProtocolRequestType(e.method)}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new i.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new i.ProtocolNotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.method="textDocument/completion",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.method="completionItem/resolve",e.type=new i.ProtocolRequestType(e.method)}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.method="textDocument/hover",e.type=new i.ProtocolRequestType(e.method)}(t.HoverRequest||(t.HoverRequest={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3}(t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})),function(e){e.method="textDocument/signatureHelp",e.type=new i.ProtocolRequestType(e.method)}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.method="textDocument/definition",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.method="textDocument/references",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.method="textDocument/documentHighlight",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.method="textDocument/documentSymbol",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.method="textDocument/codeAction",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.method="workspace/symbol",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new i.ProtocolRequestType("textDocument/codeLens"),e.resultType=new o.ProgressType}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new i.ProtocolRequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.method="textDocument/documentLink",e.type=new i.ProtocolRequestType(e.method),e.resultType=new o.ProgressType}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new i.ProtocolRequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.method="textDocument/formatting",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.method="textDocument/rangeFormatting",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.method="textDocument/onTypeFormatting",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.method="textDocument/rename",e.type=new i.ProtocolRequestType(e.method)}(t.RenameRequest||(t.RenameRequest={})),function(e){e.method="textDocument/prepareRename",e.type=new i.ProtocolRequestType(e.method)}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new i.ProtocolRequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new i.ProtocolRequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},258:function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(17);!function(e){e.method="textDocument/implementation",e.type=new o.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.ImplementationRequest||(t.ImplementationRequest={}))},260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(17);!function(e){e.method="textDocument/typeDefinition",e.type=new o.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17);!function(e){e.type=new r.ProtocolRequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17);!function(e){e.type=new r.ProtocolRequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(17);!function(e){e.method="textDocument/documentColor",e.type=new o.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new o.ProtocolRequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(17);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.method="textDocument/foldingRange",e.type=new o.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(17);!function(e){e.method="textDocument/declaration",e.type=new o.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.DeclarationRequest||(t.DeclarationRequest={}))},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(17);!function(e){e.method="textDocument/selectionRange",e.type=new o.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.SelectionRangeRequest||(t.SelectionRangeRequest={}))},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(17);!function(e){e.type=new r.ProgressType}(t.WorkDoneProgress||(t.WorkDoneProgress={})),function(e){e.type=new o.ProtocolRequestType("window/workDoneProgress/create")}(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})),function(e){e.type=new o.ProtocolNotificationType("window/workDoneProgress/cancel")}(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))},268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17);!function(e){e.method="textDocument/prepareCallHierarchy",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})),function(e){e.method="callHierarchy/incomingCalls",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})),function(e){e.method="callHierarchy/outgoingCalls",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))},269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17);!function(e){e.comment="comment",e.keyword="keyword",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.namespace="namespace",e.type="type",e.struct="struct",e.class="class",e.interface="interface",e.enum="enum",e.typeParameter="typeParameter",e.function="function",e.member="member",e.property="property",e.macro="macro",e.variable="variable",e.parameter="parameter",e.label="label"}(t.SemanticTokenTypes||(t.SemanticTokenTypes={})),function(e){e.documentation="documentation",e.declaration="declaration",e.definition="definition",e.reference="reference",e.static="static",e.abstract="abstract",e.deprecated="deprecated",e.async="async",e.volatile="volatile",e.readonly="readonly"}(t.SemanticTokenModifiers||(t.SemanticTokenModifiers={})),function(e){e.is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(t.SemanticTokens||(t.SemanticTokens={})),function(e){e.method="textDocument/semanticTokens",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensRequest||(t.SemanticTokensRequest={})),function(e){e.method="textDocument/semanticTokens/edits",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensEditsRequest||(t.SemanticTokensEditsRequest={})),function(e){e.method="textDocument/semanticTokens/range",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={}))},36:function(e,t,n){"use strict";function r(e){return"property"===e.type}function o(e){return"object"===e.type}function i(e,t){return t>=e.offset&&t<=e.offset+e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.isStringNode=function(e){return"string"===e.type},t.isPropertyNode=r,t.isObjectNode=o,t.isArrayNode=function(e){return"array"===e.type},t.findPropChildByName=function(e,t){return e.properties.find(e=>e.keyNode.value===t)},t.isChildOfStates=function(e){return!!e.parent&&r(e.parent)&&"States"===e.parent.keyNode.value},t.insideStateNode=function(e){var t,n,o;const i=null===(n=null===(t=e.parent)||void 0===t?void 0:t.parent)||void 0===n?void 0:n.parent;return!!i&&r(i)&&"States"===(null===(o=i.keyNode)||void 0===o?void 0:o.value)},t.findNodeAtLocation=function e(t,n){if(i(t,n)){const{children:r}=t;if(null==r?void 0:r.length){const t=r.find(e=>i(e,n));if(t)return e(t,n)}return t}},t.findClosestAncestorStateNode=function e(t){return r(t)&&"States"===t.keyNode.value?t:t.parent?e(t.parent):void 0},t.getListOfStateNamesFromStateNode=function(e){var t;if("States"===e.keyNode.value){const n=e.children.find(o);return null!==(t=null==n?void 0:n.children.filter(e=>r(e)&&e.colonOffset&&e.colonOffset>=0).map(e=>e.keyNode.value))&&void 0!==t?t:[]}throw new Error("Not a state name property node")}},44:function(e,t){e.exports=require("url")},45:function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=!1);var n=e.length,r=0,a="",c=0,u=16,l=0,f=0,p=0,d=0,h=0;function m(t,n){for(var o=0,i=0;o<t||!n;){var s=e.charCodeAt(r);if(s>=48&&s<=57)i=16*i+s-48;else if(s>=65&&s<=70)i=16*i+s-65+10;else{if(!(s>=97&&s<=102))break;i=16*i+s-97+10}r++,o++}return o<t&&(i=-1),i}function g(){if(a="",h=0,c=r,f=l,d=p,r>=n)return c=n,u=17;var t=e.charCodeAt(r);if(o(t)){do{r++,a+=String.fromCharCode(t),t=e.charCodeAt(r)}while(o(t));return u=15}if(i(t))return r++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(r)&&(r++,a+="\n"),l++,p=r,u=14;switch(t){case 123:return r++,u=1;case 125:return r++,u=2;case 91:return r++,u=3;case 93:return r++,u=4;case 58:return r++,u=6;case 44:return r++,u=5;case 34:return r++,a=function(){for(var t="",o=r;;){if(r>=n){t+=e.substring(o,r),h=2;break}var s=e.charCodeAt(r);if(34===s){t+=e.substring(o,r),r++;break}if(92!==s){if(s>=0&&s<=31){if(i(s)){t+=e.substring(o,r),h=2;break}h=6}r++}else{if(t+=e.substring(o,r),++r>=n){h=2;break}switch(e.charCodeAt(r++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=m(4,!0);a>=0?t+=String.fromCharCode(a):h=4;break;default:h=5}o=r}}return t}(),u=10;case 47:var g=r-1;if(47===e.charCodeAt(r+1)){for(r+=2;r<n&&!i(e.charCodeAt(r));)r++;return a=e.substring(g,r),u=12}if(42===e.charCodeAt(r+1)){r+=2;for(var v=n-1,b=!1;r<v;){var S=e.charCodeAt(r);if(42===S&&47===e.charCodeAt(r+1)){r+=2,b=!0;break}r++,i(S)&&(13===S&&10===e.charCodeAt(r)&&r++,l++,p=r)}return b||(r++,h=1),a=e.substring(g,r),u=13}return a+=String.fromCharCode(t),r++,u=16;case 45:if(a+=String.fromCharCode(t),++r===n||!s(e.charCodeAt(r)))return u=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=r;if(48===e.charCodeAt(r))r++;else for(r++;r<e.length&&s(e.charCodeAt(r));)r++;if(r<e.length&&46===e.charCodeAt(r)){if(!(++r<e.length&&s(e.charCodeAt(r))))return h=3,e.substring(t,r);for(r++;r<e.length&&s(e.charCodeAt(r));)r++}var n=r;if(r<e.length&&(69===e.charCodeAt(r)||101===e.charCodeAt(r)))if((++r<e.length&&43===e.charCodeAt(r)||45===e.charCodeAt(r))&&r++,r<e.length&&s(e.charCodeAt(r))){for(r++;r<e.length&&s(e.charCodeAt(r));)r++;n=r}else h=3;return e.substring(t,n)}(),u=11;default:for(;r<n&&y(t);)r++,t=e.charCodeAt(r);if(c!==r){switch(a=e.substring(c,r)){case"true":return u=8;case"false":return u=9;case"null":return u=7}return u=16}return a+=String.fromCharCode(t),r++,u=16}}function y(e){if(o(e)||i(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){r=e,a="",c=0,u=16,h=0},getPosition:function(){return r},scan:t?function(){var e;do{e=g()}while(e>=12&&e<=15);return e}:g,getToken:function(){return u},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return r-c},getTokenStartLine:function(){return f},getTokenStartCharacter:function(){return c-d},getTokenError:function(){return h}}}function o(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function i(e){return 10===e||13===e||8232===e||8233===e}function s(e){return e>=48&&e<=57}function a(e,t,n){var o,i,s,a,l;if(t){for(a=t.offset,l=a+t.length,s=a;s>0&&!u(e,s-1);)s--;for(var f=l;f<e.length&&!u(e,f);)f++;i=e.substring(s,f),o=function(e,t){var n=0,r=0,o=t.tabSize||4;for(;n<e.length;){var i=e.charAt(n);if(" "===i)r++;else{if("\t"!==i)break;r+=o}n++}return Math.floor(r/o)}(i,n)}else i=e,o=0,s=0,a=0,l=e.length;var p,d=function(e,t){for(var n=0;n<t.length;n++){var r=t.charAt(n);if("\r"===r)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===r)return"\n"}return e&&e.eol||"\n"}(n,e),h=!1,m=0;p=n.insertSpaces?c(" ",n.tabSize||4):"\t";var g=r(i,!1),y=!1;function v(){return d+c(p,o+m)}function b(){var e=g.scan();for(h=!1;15===e||14===e;)h=h||14===e,e=g.scan();return y=16===e||0!==g.getTokenError(),e}var S=[];function T(t,n,r){!y&&n<l&&r>a&&e.substring(n,r)!==t&&S.push({offset:n,length:r-n,content:t})}var C=b();if(17!==C){var x=g.getTokenOffset()+s;T(c(p,o),s,x)}for(;17!==C;){for(var O=g.getTokenOffset()+g.getTokenLength()+s,k=b(),R="";!h&&(12===k||13===k);){T(" ",O,g.getTokenOffset()+s),O=g.getTokenOffset()+g.getTokenLength()+s,R=12===k?v():"",k=b()}if(2===k)1!==C&&(m--,R=v());else if(4===k)3!==C&&(m--,R=v());else{switch(C){case 3:case 1:m++,R=v();break;case 5:case 12:R=v();break;case 13:R=h?v():" ";break;case 6:R=" ";break;case 10:if(6===k){R="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===k||13===k?R=" ":5!==k&&17!==k&&(y=!0);break;case 16:y=!0}!h||12!==k&&13!==k||(R=v())}T(R,O,g.getTokenOffset()+s),C=k}return S}function c(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function u(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var l;function f(e,t,n){void 0===n&&(n=l.DEFAULT);var o=r(e,!1);function i(e){return e?function(){return e(o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter())}:function(){return!0}}function s(e){return e?function(t){return e(t,o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter())}:function(){return!0}}var a=i(t.onObjectBegin),c=s(t.onObjectProperty),u=i(t.onObjectEnd),f=i(t.onArrayBegin),p=i(t.onArrayEnd),d=s(t.onLiteralValue),h=s(t.onSeparator),m=i(t.onComment),g=s(t.onError),y=n&&n.disallowComments,v=n&&n.allowTrailingComma;function b(){for(;;){var e=o.scan();switch(o.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:y||S(11);break;case 2:S(12);break;case 6:S(16)}switch(e){case 12:case 13:y?S(10):m();break;case 16:S(1);break;case 15:case 14:break;default:return e}}}function S(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),g(e),t.length+n.length>0)for(var r=o.getToken();17!==r;){if(-1!==t.indexOf(r)){b();break}if(-1!==n.indexOf(r))break;r=b()}}function T(e){var t=o.getTokenValue();return e?d(t):c(t),b(),!0}function C(){switch(o.getToken()){case 3:return function(){f(),b();for(var e=!1;4!==o.getToken()&&17!==o.getToken();){if(5===o.getToken()){if(e||S(4,[],[]),h(","),b(),4===o.getToken()&&v)break}else e&&S(6,[],[]);C()||S(4,[],[4,5]),e=!0}return p(),4!==o.getToken()?S(8,[4],[]):b(),!0}();case 1:return function(){a(),b();for(var e=!1;2!==o.getToken()&&17!==o.getToken();){if(5===o.getToken()){if(e||S(4,[],[]),h(","),b(),2===o.getToken()&&v)break}else e&&S(6,[],[]);(10!==o.getToken()?(S(3,[],[2,5]),0):(T(!1),6===o.getToken()?(h(":"),b(),C()||S(4,[],[2,5])):S(5,[],[2,5]),1))||S(4,[],[2,5]),e=!0}return u(),2!==o.getToken()?S(7,[2],[]):b(),!0}();case 10:return T(!0);default:return function(){switch(o.getToken()){case 11:var e=0;try{"number"!=typeof(e=JSON.parse(o.getTokenValue()))&&(S(2),e=0)}catch(e){S(2)}d(e);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return b(),!0}()}}return b(),17===o.getToken()?!!n.allowEmptyContent||(S(4,[],[]),!1):C()?(17!==o.getToken()&&S(9,[],[]),!0):(S(4,[],[]),!1)}n.r(t),n.d(t,"TextDocument",(function(){return T})),n.d(t,"Range",(function(){return O.Range})),n.d(t,"TextEdit",(function(){return O.TextEdit})),n.d(t,"Color",(function(){return O.Color})),n.d(t,"ColorInformation",(function(){return O.ColorInformation})),n.d(t,"ColorPresentation",(function(){return O.ColorPresentation})),n.d(t,"FoldingRange",(function(){return O.FoldingRange})),n.d(t,"FoldingRangeKind",(function(){return O.FoldingRangeKind})),n.d(t,"SelectionRange",(function(){return O.SelectionRange})),n.d(t,"Diagnostic",(function(){return O.Diagnostic})),n.d(t,"DiagnosticSeverity",(function(){return O.DiagnosticSeverity})),n.d(t,"CompletionItem",(function(){return O.CompletionItem})),n.d(t,"CompletionItemKind",(function(){return O.CompletionItemKind})),n.d(t,"CompletionList",(function(){return O.CompletionList})),n.d(t,"Position",(function(){return O.Position})),n.d(t,"InsertTextFormat",(function(){return O.InsertTextFormat})),n.d(t,"MarkupContent",(function(){return O.MarkupContent})),n.d(t,"MarkupKind",(function(){return O.MarkupKind})),n.d(t,"SymbolInformation",(function(){return O.SymbolInformation})),n.d(t,"SymbolKind",(function(){return O.SymbolKind})),n.d(t,"DocumentSymbol",(function(){return O.DocumentSymbol})),n.d(t,"Location",(function(){return O.Location})),n.d(t,"Hover",(function(){return O.Hover})),n.d(t,"MarkedString",(function(){return O.MarkedString})),n.d(t,"FormattingOptions",(function(){return O.FormattingOptions})),n.d(t,"ErrorCode",(function(){return C})),n.d(t,"ClientCapabilities",(function(){return x})),n.d(t,"getLanguageService",(function(){return ze})),function(e){e.DEFAULT={allowTrailingComma:!1}}(l||(l={}));var p=r,d=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=l.DEFAULT);var r=null,o=[],i=[];function s(e){Array.isArray(o)?o.push(e):null!==r&&(o[r]=e)}return f(e,{onObjectBegin:function(){var e={};s(e),i.push(o),o=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){o=i.pop()},onArrayBegin:function(){var e=[];s(e),i.push(o),o=e,r=null},onArrayEnd:function(){o=i.pop()},onLiteralValue:s,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),o[0]},h=function e(t,n,r){if(void 0===r&&(r=!1),function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(t,n,r)){var o=t.children;if(Array.isArray(o))for(var i=0;i<o.length&&o[i].offset<=n;i++){var s=e(o[i],n,r);if(s)return s}return t}},m=function e(t){if(!t.parent||!t.parent.children)return[];var n=e(t.parent);if("property"===t.parent.type){var r=t.parent.children[0].value;n.push(r)}else if("array"===t.parent.type){var o=t.parent.children.indexOf(t);-1!==o&&n.push(o)}return n},g=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var n=Object.create(null),r=0,o=t.children;r<o.length;r++){var i=o[r],s=i.children[1];s&&(n[i.children[0].value]=e(s))}return n;case"null":case"string":case"number":case"boolean":return t.value;default:return}};function y(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!y(e[n],t[n]))return!1}else{var o=[];for(r in e)o.push(r);o.sort();var i=[];for(r in t)i.push(r);if(i.sort(),!y(o,i))return!1;for(n=0;n<o.length;n++)if(!y(e[o[n]],t[o[n]]))return!1}return!0}function v(e){return"number"==typeof e}function b(e){return void 0!==e}function S(e){return"boolean"==typeof e}var T,C,x,O=n(7),k=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(t,n){for(var r=0,o=t;r<o.length;r++){var i=o[r];if(e.isIncremental(i)){var s=P(i.range),a=this.offsetAt(s.start),c=this.offsetAt(s.end);this._content=this._content.substring(0,a)+i.text+this._content.substring(c,this._content.length);var u=Math.max(s.start.line,0),l=Math.max(s.end.line,0),f=this._lineOffsets,p=R(i.text,!1,a);if(l-u===p.length)for(var d=0,h=p.length;d<h;d++)f[d+u+1]=p[d];else p.length<1e4?f.splice.apply(f,[u+1,l-u].concat(p)):this._lineOffsets=f=f.slice(0,u+1).concat(p,f.slice(l+1));var m=i.text.length-(c-a);if(0!==m)for(d=u+1+p.length,h=f.length;d<h;d++)f[d]=f[d]+m}else{if(!e.isFull(i))throw new Error("Unknown change event received");this._content=i.text,this._lineOffsets=void 0}}this._version=n},e.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=R(this._content,!0)),this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){var o=Math.floor((n+r)/2);t[o]>e?r=o:n=o+1}var i=n-1;return{line:i,character:e-t[i]}},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e.isIncremental=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},e}();function R(e,t,n){void 0===n&&(n=0);for(var r=t?[n]:[],o=0;o<e.length;o++){var i=e.charCodeAt(o);13!==i&&10!==i||(13===i&&o+1<e.length&&10===e.charCodeAt(o+1)&&o++,r.push(n+o+1))}return r}function P(e){var t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function w(e){var t=P(e.range);return t!==e.range?{newText:e.newText,range:t}:e}!function(e){e.create=function(e,t,n,r){return new k(e,t,n,r)},e.update=function(e,t,n){if(e instanceof k)return e.update(t,n),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},e.applyEdits=function(e,t){for(var n=e.getText(),r=0,o=[],i=0,s=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,o=t.slice(0,r),i=t.slice(r);e(o,n),e(i,n);var s=0,a=0,c=0;for(;s<o.length&&a<i.length;){var u=n(o[s],i[a]);t[c++]=u<=0?o[s++]:i[a++]}for(;s<o.length;)t[c++]=o[s++];for(;a<i.length;)t[c++]=i[a++];return t}(t.map(w),(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}));i<s.length;i++){var a=s[i],c=e.offsetAt(a.range.start);if(c<r)throw new Error("Overlapping edit");c>r&&o.push(n.substring(r,c)),a.newText.length&&o.push(a.newText),r=e.offsetAt(a.range.end)}return o.push(n.substr(r)),o.join("")}}(T||(T={})),function(e){e[e.Undefined=0]="Undefined",e[e.EnumValueMismatch=1]="EnumValueMismatch",e[e.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=258]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",e[e.InvalidUnicode=260]="InvalidUnicode",e[e.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",e[e.InvalidCharacter=262]="InvalidCharacter",e[e.PropertyExpected=513]="PropertyExpected",e[e.CommaExpected=514]="CommaExpected",e[e.ColonExpected=515]="ColonExpected",e[e.ValueExpected=516]="ValueExpected",e[e.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",e[e.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",e[e.TrailingComma=519]="TrailingComma",e[e.DuplicateKey=520]="DuplicateKey",e[e.CommentNotPermitted=521]="CommentNotPermitted",e[e.SchemaResolveError=768]="SchemaResolveError"}(C||(C={})),(x||(x={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[O.MarkupKind.Markdown,O.MarkupKind.PlainText],commitCharactersSupport:!0}}}};var E,N,_=n(5),D=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),A=_.loadMessageBundle(),q={"color-hex":{errorMessage:A("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:A("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:A("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:A("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:A("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},I=function(){function e(e,t,n){this.offset=t,this.length=n,this.parent=e}return Object.defineProperty(e.prototype,"children",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},e}(),M=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="null",r.value=null,r}return D(t,e),t}(I),j=function(e){function t(t,n,r){var o=e.call(this,t,r)||this;return o.type="boolean",o.value=n,o}return D(t,e),t}(I),F=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="array",r.items=[],r}return D(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.items},enumerable:!0,configurable:!0}),t}(I),L=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="number",r.isInteger=!0,r.value=Number.NaN,r}return D(t,e),t}(I),$=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.type="string",o.value="",o}return D(t,e),t}(I),V=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="property",r.colonOffset=-1,r}return D(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!0,configurable:!0}),t}(I),W=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="object",r.properties=[],r}return D(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties},enumerable:!0,configurable:!0}),t}(I);function U(e){return S(e)?e?{}:{not:{}}:e}!function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(N||(N={}));var H=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=null),this.focusOffset=e,this.exclude=t,this.schemas=[]}return e.prototype.add=function(e){this.schemas.push(e)},e.prototype.merge=function(e){var t;(t=this.schemas).push.apply(t,e.schemas)},e.prototype.include=function(e){return(-1===this.focusOffset||J(e,this.focusOffset))&&e!==this.exclude},e.prototype.newSub=function(){return new e(-1,this.exclude)},e}(),B=function(){function e(){}return Object.defineProperty(e.prototype,"schemas",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.add=function(e){},e.prototype.merge=function(e){},e.prototype.include=function(e){return!0},e.prototype.newSub=function(){return this},e.instance=new e,e}(),z=function(){function e(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=null}return e.prototype.hasProblems=function(){return!!this.problems.length},e.prototype.mergeAll=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.merge(r)}},e.prototype.merge=function(e){this.problems=this.problems.concat(e.problems)},e.prototype.mergeEnumValues=function(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(var t=0,n=this.problems;t<n.length;t++){var r=n[t];r.code===C.EnumValueMismatch&&(r.message=A("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map((function(e){return JSON.stringify(e)})).join(", ")))}}},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++},e.prototype.compare=function(e){var t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();function K(e){return g(e)}function G(e){return m(e)}function J(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}var X=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),this.root=e,this.syntaxErrors=t,this.comments=n}return e.prototype.getNodeFromOffset=function(e,t){if(void 0===t&&(t=!1),this.root)return h(this.root,e,t)},e.prototype.visit=function(e){if(this.root){var t=function(n){var r=e(n),o=n.children;if(Array.isArray(o))for(var i=0;i<o.length&&r;i++)r=t(o[i]);return r};t(this.root)}},e.prototype.validate=function(e,t){if(this.root&&t){var n=new z;return Q(this.root,t,n,B.instance),n.problems.map((function(t){var n=O.Range.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length));return O.Diagnostic.create(n,t.message,t.severity,t.code)}))}return null},e.prototype.getMatchingSchemas=function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=null);var r=new H(t,n);return this.root&&e&&Q(this.root,e,new z,r),r.schemas},e}();function Q(e,t,n,r){if(e&&r.include(e)){switch(e.type){case"object":!function(e,t,n,r){for(var o=Object.create(null),i=[],s=0,a=e.properties;s<a.length;s++){var c=(b=a[s]).keyNode.value;o[c]=b.valueNode,i.push(c)}if(Array.isArray(t.required))for(var u=0,l=t.required;u<l.length;u++){var f=l[u];if(!o[f]){var p=e.parent&&"property"===e.parent.type&&e.parent.keyNode,d=p?{offset:p.offset,length:p.length}:{offset:e.offset,length:1};n.problems.push({location:d,severity:O.DiagnosticSeverity.Warning,message:A("MissingRequiredPropWarning",'Missing property "{0}".',f)})}}var h=function(e){for(var t=i.indexOf(e);t>=0;)i.splice(t,1),t=i.indexOf(e)};if(t.properties)for(var m=0,g=Object.keys(t.properties);m<g.length;m++){f=g[m];h(f);var y=t.properties[f];if(q=o[f])if(S(y))if(y)n.propertiesMatches++,n.propertiesValueMatches++;else{var b=q.parent;n.problems.push({location:{offset:b.keyNode.offset,length:b.keyNode.length},severity:O.DiagnosticSeverity.Warning,message:t.errorMessage||A("DisallowedExtraPropWarning","Property {0} is not allowed.",f)})}else{var T=new z;Q(q,y,T,r),n.mergePropertyMatch(T)}}if(t.patternProperties)for(var C=0,x=Object.keys(t.patternProperties);C<x.length;C++)for(var k=x[C],R=new RegExp(k),P=0,w=i.slice(0);P<w.length;P++){f=w[P];if(R.test(f))if(h(f),q=o[f])if(S(y=t.patternProperties[k]))if(y)n.propertiesMatches++,n.propertiesValueMatches++;else{b=q.parent;n.problems.push({location:{offset:b.keyNode.offset,length:b.keyNode.length},severity:O.DiagnosticSeverity.Warning,message:t.errorMessage||A("DisallowedExtraPropWarning","Property {0} is not allowed.",f)})}else{T=new z;Q(q,y,T,r),n.mergePropertyMatch(T)}}if("object"==typeof t.additionalProperties)for(var E=0,N=i;E<N.length;E++){f=N[E];if(q=o[f]){T=new z;Q(q,t.additionalProperties,T,r),n.mergePropertyMatch(T)}}else if(!1===t.additionalProperties&&i.length>0)for(var _=0,D=i;_<D.length;_++){var q;f=D[_];if(q=o[f]){b=q.parent;n.problems.push({location:{offset:b.keyNode.offset,length:b.keyNode.length},severity:O.DiagnosticSeverity.Warning,message:t.errorMessage||A("DisallowedExtraPropWarning","Property {0} is not allowed.",f)})}}v(t.maxProperties)&&e.properties.length>t.maxProperties&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties)});v(t.minProperties)&&e.properties.length<t.minProperties&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties)});if(t.dependencies)for(var I=0,M=Object.keys(t.dependencies);I<M.length;I++){c=M[I];if(o[c]){var j=t.dependencies[c];if(Array.isArray(j))for(var F=0,L=j;F<L.length;F++){var $=L[F];o[$]?n.propertiesValueMatches++:n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",$,c)})}else if(y=U(j)){T=new z;Q(e,y,T,r),n.mergePropertyMatch(T)}}}var V=U(t.propertyNames);if(V)for(var W=0,H=e.properties;W<H.length;W++){var K=H[W];(c=K.keyNode)&&Q(c,V,n,B.instance)}}(e,t,n,r);break;case"array":!function(e,t,n,r){if(Array.isArray(t.items)){for(var o=t.items,i=0;i<o.length;i++){var s=U(o[i]),a=new z;(p=e.items[i])?(Q(p,s,a,r),n.mergePropertyMatch(a)):e.items.length>=o.length&&n.propertiesValueMatches++}if(e.items.length>o.length)if("object"==typeof t.additionalItems)for(var c=o.length;c<e.items.length;c++){a=new z;Q(e.items[c],t.additionalItems,a,r),n.mergePropertyMatch(a)}else!1===t.additionalItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",o.length)})}else{var u=U(t.items);if(u)for(var l=0,f=e.items;l<f.length;l++){var p=f[l];a=new z;Q(p,u,a,r),n.mergePropertyMatch(a)}}var d=U(t.contains);if(d){e.items.some((function(e){var t=new z;return Q(e,d,t,B.instance),!t.hasProblems()}))||n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:t.errorMessage||A("requiredItemMissingWarning","Array does not contain required item.")})}v(t.minItems)&&e.items.length<t.minItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems)});v(t.maxItems)&&e.items.length>t.maxItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems)});if(!0===t.uniqueItems){var h=K(e);h.some((function(e,t){return t!==h.lastIndexOf(e)}))&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("uniqueItemsWarning","Array has duplicate items.")})}}(e,t,n,r);break;case"string":!function(e,t,n,r){v(t.minLength)&&e.value.length<t.minLength&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength)});v(t.maxLength)&&e.value.length>t.maxLength&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength)});if(o=t.pattern,"string"==typeof o){new RegExp(t.pattern).test(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||A("patternWarning",'String does not match the pattern of "{0}".',t.pattern)})}var o;if(t.format)switch(t.format){case"uri":case"uri-reference":var i=void 0;if(e.value){var s=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(e.value);s?s[2]||"uri"!==t.format||(i=A("uriSchemeMissing","URI with a scheme is expected.")):i=A("uriMissing","URI is expected.")}else i=A("uriEmpty","URI expected.");i&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||A("uriFormatWarning","String is not a URI: {0}",i)});break;case"color-hex":case"date-time":case"date":case"time":case"email":var a=q[t.format];e.value&&a.pattern.exec(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||a.errorMessage})}}(e,t,n);break;case"number":!function(e,t,n,r){var o=e.value;v(t.multipleOf)&&o%t.multipleOf!=0&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf)});function i(e,t){return v(t)?t:S(t)&&t?e:void 0}function s(e,t){if(!S(t)||!t)return e}var a=i(t.minimum,t.exclusiveMinimum);v(a)&&o<=a&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",a)});var c=i(t.maximum,t.exclusiveMaximum);v(c)&&o>=c&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",c)});var u=s(t.minimum,t.exclusiveMinimum);v(u)&&o<u&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("minimumWarning","Value is below the minimum of {0}.",u)});var l=s(t.maximum,t.exclusiveMaximum);v(l)&&o>l&&n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("maximumWarning","Value is above the maximum of {0}.",l)})}(e,t,n);break;case"property":return Q(e.valueNode,t,n,r)}!function(){function o(t){return e.type===t||"integer"===t&&"number"===e.type&&e.isInteger}Array.isArray(t.type)?t.type.some(o)||n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:t.errorMessage||A("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", "))}):t.type&&(o(t.type)||n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:t.errorMessage||A("typeMismatchWarning",'Incorrect type. Expected "{0}".',t.type)}));if(Array.isArray(t.allOf))for(var i=0,s=t.allOf;i<s.length;i++){var a=s[i];Q(e,U(a),n,r)}var c=U(t.not);if(c){var u=new z,l=r.newSub();Q(e,c,u,l),u.hasProblems()||n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,message:A("notSchemaWarning","Matches a schema that is not allowed.")});for(var f=0,p=l.schemas;f<p.length;f++){var d=p[f];d.inverted=!d.inverted,r.add(d)}}var h=function(t,o){for(var i=[],s=null,a=0,c=t;a<c.length;a++){var u=U(c[a]),l=new z,f=r.newSub();if(Q(e,u,l,f),l.hasProblems()||i.push(u),s)if(o||l.hasProblems()||s.validationResult.hasProblems()){var p=l.compare(s.validationResult);p>0?s={schema:u,validationResult:l,matchingSchemas:f}:0===p&&(s.matchingSchemas.merge(f),s.validationResult.mergeEnumValues(l))}else s.matchingSchemas.merge(f),s.validationResult.propertiesMatches+=l.propertiesMatches,s.validationResult.propertiesValueMatches+=l.propertiesValueMatches;else s={schema:u,validationResult:l,matchingSchemas:f}}return i.length>1&&o&&n.problems.push({location:{offset:e.offset,length:1},severity:O.DiagnosticSeverity.Warning,message:A("oneOfWarning","Matches multiple schemas when only one must validate.")}),null!==s&&(n.merge(s.validationResult),n.propertiesMatches+=s.validationResult.propertiesMatches,n.propertiesValueMatches+=s.validationResult.propertiesValueMatches,r.merge(s.matchingSchemas)),i.length};Array.isArray(t.anyOf)&&h(t.anyOf,!1);Array.isArray(t.oneOf)&&h(t.oneOf,!0);var m=function(t){var o=new z,i=r.newSub();Q(e,U(t),o,i),n.merge(o),n.propertiesMatches+=o.propertiesMatches,n.propertiesValueMatches+=o.propertiesValueMatches,r.merge(i)},g=U(t.if);g&&function(t,n,o){var i=U(t),s=new z,a=r.newSub();Q(e,i,s,a),r.merge(a),s.hasProblems()?o&&m(o):n&&m(n)}(g,U(t.then),U(t.else));if(Array.isArray(t.enum)){for(var v=K(e),S=!1,T=0,x=t.enum;T<x.length;T++){var k=x[T];if(y(v,k)){S=!0;break}}n.enumValues=t.enum,n.enumValueMatch=S,S||n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,code:C.EnumValueMismatch,message:t.errorMessage||A("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map((function(e){return JSON.stringify(e)})).join(", "))})}if(b(t.const)){y(v=K(e),t.const)?n.enumValueMatch=!0:(n.problems.push({location:{offset:e.offset,length:e.length},severity:O.DiagnosticSeverity.Warning,code:C.EnumValueMismatch,message:t.errorMessage||A("constWarning","Value must be {0}.",JSON.stringify(t.const))}),n.enumValueMatch=!1),n.enumValues=[t.const]}t.deprecationMessage&&e.parent&&n.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:O.DiagnosticSeverity.Warning,message:t.deprecationMessage})}(),r.add({node:e,schema:t})}}function Y(e,t){var n=[],r=-1,o=e.getText(),i=p(o,!1),s=t&&t.collectComments?[]:void 0;function a(){for(;;){var t=i.scan();switch(l(),t){case 12:case 13:Array.isArray(s)&&s.push(O.Range.create(e.positionAt(i.getTokenOffset()),e.positionAt(i.getTokenOffset()+i.getTokenLength())));break;case 15:case 14:break;default:return t}}}function c(t,o,i,s,a){if(void 0===a&&(a=O.DiagnosticSeverity.Error),0===n.length||i!==r){var c=O.Range.create(e.positionAt(i),e.positionAt(s));n.push(O.Diagnostic.create(c,t,a,o,e.languageId)),r=i}}function u(e,t,n,r,s){void 0===n&&(n=null),void 0===r&&(r=[]),void 0===s&&(s=[]);var u=i.getTokenOffset(),l=i.getTokenOffset()+i.getTokenLength();if(u===l&&u>0){for(u--;u>0&&/\s/.test(o.charAt(u));)u--;l=u+1}if(c(e,t,u,l),n&&f(n,!1),r.length+s.length>0)for(var p=i.getToken();17!==p;){if(-1!==r.indexOf(p)){a();break}if(-1!==s.indexOf(p))break;p=a()}return n}function l(){switch(i.getTokenError()){case 4:return u(A("InvalidUnicode","Invalid unicode sequence in string."),C.InvalidUnicode),!0;case 5:return u(A("InvalidEscapeCharacter","Invalid escape character in string."),C.InvalidEscapeCharacter),!0;case 3:return u(A("UnexpectedEndOfNumber","Unexpected end of number."),C.UnexpectedEndOfNumber),!0;case 1:return u(A("UnexpectedEndOfComment","Unexpected end of comment."),C.UnexpectedEndOfComment),!0;case 2:return u(A("UnexpectedEndOfString","Unexpected end of string."),C.UnexpectedEndOfString),!0;case 6:return u(A("InvalidCharacter","Invalid characters in string. Control characters must be escaped."),C.InvalidCharacter),!0}return!1}function f(e,t){return e.length=i.getTokenOffset()+i.getTokenLength()-e.offset,t&&a(),e}function d(t,n){var r=new V(t,i.getTokenOffset()),o=h(r);if(!o){if(16!==i.getToken())return null;u(A("DoubleQuotesExpected","Property keys must be doublequoted"),C.Undefined);var s=new $(r,i.getTokenOffset(),i.getTokenLength());s.value=i.getTokenValue(),o=s,a()}r.keyNode=o;var l=n[o.value];if(l?(c(A("DuplicateKeyWarning","Duplicate object key"),C.DuplicateKey,r.keyNode.offset,r.keyNode.offset+r.keyNode.length,O.DiagnosticSeverity.Warning),"object"==typeof l&&c(A("DuplicateKeyWarning","Duplicate object key"),C.DuplicateKey,l.keyNode.offset,l.keyNode.offset+l.keyNode.length,O.DiagnosticSeverity.Warning),n[o.value]=!0):n[o.value]=r,6===i.getToken())r.colonOffset=i.getTokenOffset(),a();else if(u(A("ColonExpected","Colon expected"),C.ColonExpected),10===i.getToken()&&e.positionAt(o.offset+o.length).line<e.positionAt(i.getTokenOffset()).line)return r.length=o.length,r;var f=m(r,o.value);return f?(r.valueNode=f,r.length=f.offset+f.length-r.offset,r):u(A("ValueExpected","Value expected"),C.ValueExpected,r,[],[2,5])}function h(e){if(10!==i.getToken())return null;var t=new $(e,i.getTokenOffset());return t.value=i.getTokenValue(),f(t,!0)}function m(e,t){return function(e){if(3!==i.getToken())return null;var t=new F(e,i.getTokenOffset());a();for(var n=0,r=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){r||u(A("ValueExpected","Value expected"),C.ValueExpected);var o=i.getTokenOffset();if(a(),4===i.getToken()){r&&c(A("TrailingComma","Trailing comma"),C.TrailingComma,o,o+1);continue}}else r&&u(A("ExpectedComma","Expected comma"),C.CommaExpected);var s=m(t,n++);s?t.items.push(s):u(A("PropertyExpected","Value expected"),C.ValueExpected,null,[],[4,5]),r=!0}return 4!==i.getToken()?u(A("ExpectedCloseBracket","Expected comma or closing bracket"),C.CommaOrCloseBacketExpected,t):f(t,!0)}(e)||function(e){if(1!==i.getToken())return null;var t=new W(e,i.getTokenOffset()),n=Object.create(null);a();for(var r=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){r||u(A("PropertyExpected","Property expected"),C.PropertyExpected);var o=i.getTokenOffset();if(a(),2===i.getToken()){r&&c(A("TrailingComma","Trailing comma"),C.TrailingComma,o,o+1);continue}}else r&&u(A("ExpectedComma","Expected comma"),C.CommaExpected);var s=d(t,n);s?t.properties.push(s):u(A("PropertyExpected","Property expected"),C.PropertyExpected,null,[],[2,5]),r=!0}return 2!==i.getToken()?u(A("ExpectedCloseBrace","Expected comma or closing brace"),C.CommaOrCloseBraceExpected,t):f(t,!0)}(e)||h(e)||function(e){if(11!==i.getToken())return null;var t=new L(e,i.getTokenOffset());if(0===i.getTokenError()){var n=i.getTokenValue();try{var r=JSON.parse(n);if(!v(r))return u(A("InvalidNumberFormat","Invalid number format."),C.Undefined,t);t.value=r}catch(e){return u(A("InvalidNumberFormat","Invalid number format."),C.Undefined,t)}t.isInteger=-1===n.indexOf(".")}return f(t,!0)}(e)||function(e){switch(i.getToken()){case 7:return f(new M(e,i.getTokenOffset()),!0);case 8:return f(new j(e,!0,i.getTokenOffset()),!0);case 9:return f(new j(e,!1,i.getTokenOffset()),!0);default:return null}}(e)}var g=null;return 17!==a()&&((g=m(null))?17!==i.getToken()&&u(A("End of file expected","End of file expected."),C.Undefined):u(A("Invalid symbol","Expected a JSON object, array or literal."),C.Undefined)),new X(g,n,s)}function Z(e,t){var n=e.length-t.length;return n>0?e.lastIndexOf(t)===n:0===n&&e===t}var ee=_.loadMessageBundle(),te=function(){function e(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=Promise),void 0===r&&(r={}),this.schemaService=e,this.contributions=t,this.promiseConstructor=n,this.clientCapabilities=r,this.templateVarIdCounter=0}return e.prototype.doResolve=function(e){for(var t=this.contributions.length-1;t>=0;t--)if(this.contributions[t].resolveCompletion){var n=this.contributions[t].resolveCompletion(e);if(n)return n}return this.promiseConstructor.resolve(e)},e.prototype.doComplete=function(e,t,n){var r=this,o={items:[],isIncomplete:!1},i=e.getText(),s=e.offsetAt(t),a=n.getNodeFromOffset(s,!0);if(this.isInComment(e,a?a.offset:0,s))return Promise.resolve(o);if(a&&s===a.offset+a.length&&s>0){var c=i[s-1];("object"===a.type&&"}"===c||"array"===a.type&&"]"===c)&&(a=a.parent)}var u=this.getCurrentWord(e,s),l=null;if(!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type){var f=s-u.length;f>0&&'"'===i[f-1]&&f--,l=O.Range.create(e.positionAt(f),t)}else l=O.Range.create(e.positionAt(a.offset),e.positionAt(a.offset+a.length));var p={},d={add:function(e){var t=p[e.label];t?t.documentation||(t.documentation=e.documentation):(p[e.label]=e,l&&(e.textEdit=O.TextEdit.replace(l,e.insertText)),o.items.push(e))},setAsIncomplete:function(){o.isIncomplete=!0},error:function(e){console.error(e)},log:function(e){console.log(e)},getNumberOfProposals:function(){return o.items.length}};return this.schemaService.getSchemaForResource(e.uri,n).then((function(t){var c=[],f=!0,h="",m=null;if(a&&"string"===a.type){var g=a.parent;g&&"property"===g.type&&g.keyNode===a&&(f=!g.valueNode,m=g,h=i.substr(a.offset+1,a.length-2),g&&(a=g.parent))}if(a&&"object"===a.type){if(a.offset===s)return o;a.properties.forEach((function(e){m&&m===e||(p[e.keyNode.value]=O.CompletionItem.create("__"))}));var y="";f&&(y=r.evaluateSeparatorAfter(e,e.offsetAt(l.end))),t?r.getPropertyCompletions(t,n,a,f,y,d):r.getSchemaLessPropertyCompletions(n,a,h,d);var v=G(a);r.contributions.forEach((function(t){var n=t.collectPropertyCompletions(e.uri,v,u,f,""===y,d);n&&c.push(n)})),!t&&u.length>0&&'"'!==i.charAt(s-u.length-1)&&(d.add({kind:O.CompletionItemKind.Property,label:r.getLabelForValue(u),insertText:r.getInsertTextForProperty(u,null,!1,y),insertTextFormat:O.InsertTextFormat.Snippet,documentation:""}),d.setAsIncomplete())}var b={};return t?r.getValueCompletions(t,n,a,s,e,d,b):r.getSchemaLessValueCompletions(n,a,s,e,d),r.contributions.length>0&&r.getContributedValueCompletions(n,a,s,e,d,c),r.promiseConstructor.all(c).then((function(){if(0===d.getNumberOfProposals()){var t=s;!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type||(t=a.offset+a.length);var n=r.evaluateSeparatorAfter(e,t);r.addFillerValueCompletions(b,n,d)}return o}))}))},e.prototype.getPropertyCompletions=function(e,t,n,r,o,i){var s=this;t.getMatchingSchemas(e.schema,n.offset).forEach((function(e){if(e.node===n&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach((function(e){var n=t[e];if("object"==typeof n&&!n.deprecationMessage&&!n.doNotSuggest){var a={kind:O.CompletionItemKind.Property,label:s.sanitizeLabel(e),insertText:s.getInsertTextForProperty(e,n,r,o),insertTextFormat:O.InsertTextFormat.Snippet,filterText:s.getFilterTextForValue(e),documentation:s.fromMarkup(n.markdownDescription)||n.description||""};Z(a.insertText,"$1"+o)&&(a.command={title:"Suggest",command:"editor.action.triggerSuggest"}),i.add(a)}}))}}))},e.prototype.getSchemaLessPropertyCompletions=function(e,t,n,r){var o=this,i=function(e){e.properties.forEach((function(e){var t=e.keyNode.value;r.add({kind:O.CompletionItemKind.Property,label:o.sanitizeLabel(t),insertText:o.getInsertTextForValue(t,""),insertTextFormat:O.InsertTextFormat.Snippet,filterText:o.getFilterTextForValue(t),documentation:""})}))};if(t.parent)if("property"===t.parent.type){var s=t.parent.keyNode.value;e.visit((function(e){return"property"===e.type&&e!==t.parent&&e.keyNode.value===s&&e.valueNode&&"object"===e.valueNode.type&&i(e.valueNode),!0}))}else"array"===t.parent.type&&t.parent.items.forEach((function(e){"object"===e.type&&e!==t&&i(e)}));else"object"===t.type&&r.add({kind:O.CompletionItemKind.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",null,!0,""),insertTextFormat:O.InsertTextFormat.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})},e.prototype.getSchemaLessValueCompletions=function(e,t,n,r,o){var i=this,s=n;if(!t||"string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(s=t.offset+t.length,t=t.parent),!t)return o.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:O.InsertTextFormat.Snippet,documentation:""}),void o.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:O.InsertTextFormat.Snippet,documentation:""});var a=this.evaluateSeparatorAfter(r,s),c=function(e){J(e.parent,n,!0)||o.add({kind:i.getSuggestionKind(e.type),label:i.getLabelTextForMatchingNode(e,r),insertText:i.getInsertTextForMatchingNode(e,r,a),insertTextFormat:O.InsertTextFormat.Snippet,documentation:""}),"boolean"===e.type&&i.addBooleanValueCompletion(!e.value,a,o)};if("property"===t.type&&n>t.colonOffset){var u=t.valueNode;if(u&&(n>u.offset+u.length||"object"===u.type||"array"===u.type))return;var l=t.keyNode.value;e.visit((function(e){return"property"===e.type&&e.keyNode.value===l&&e.valueNode&&c(e.valueNode),!0})),"$schema"===l&&t.parent&&!t.parent.parent&&this.addDollarSchemaCompletions(a,o)}if("array"===t.type)if(t.parent&&"property"===t.parent.type){var f=t.parent.keyNode.value;e.visit((function(e){return"property"===e.type&&e.keyNode.value===f&&e.valueNode&&"array"===e.valueNode.type&&e.valueNode.items.forEach(c),!0}))}else t.items.forEach(c)},e.prototype.getValueCompletions=function(e,t,n,r,o,i,s){var a=this,c=r,u=null,l=null;if(!n||"string"!==n.type&&"number"!==n.type&&"boolean"!==n.type&&"null"!==n.type||(c=n.offset+n.length,l=n,n=n.parent),n){if("property"===n.type&&r>n.colonOffset){var f=n.valueNode;if(f&&r>f.offset+f.length)return;u=n.keyNode.value,n=n.parent}if(n&&(null!==u||"array"===n.type)){var p=this.evaluateSeparatorAfter(o,c);t.getMatchingSchemas(e.schema,n.offset,l).forEach((function(e){if(e.node===n&&!e.inverted&&e.schema){if("array"===n.type&&e.schema.items)if(Array.isArray(e.schema.items)){var t=a.findItemAtOffset(n,o,r);t<e.schema.items.length&&a.addSchemaValueCompletions(e.schema.items[t],p,i,s)}else a.addSchemaValueCompletions(e.schema.items,p,i,s);if(e.schema.properties){var c=e.schema.properties[u];c&&a.addSchemaValueCompletions(c,p,i,s)}}})),"$schema"!==u||n.parent||this.addDollarSchemaCompletions(p,i),s.boolean&&(this.addBooleanValueCompletion(!0,p,i),this.addBooleanValueCompletion(!1,p,i)),s.null&&this.addNullValueCompletion(p,i)}}else this.addSchemaValueCompletions(e.schema,"",i,s)},e.prototype.getContributedValueCompletions=function(e,t,n,r,o,i){if(t){if("string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(t=t.parent),"property"===t.type&&n>t.colonOffset){var s=t.keyNode.value,a=t.valueNode;if(!a||n<=a.offset+a.length){var c=G(t.parent);this.contributions.forEach((function(e){var t=e.collectValueCompletions(r.uri,c,s,o);t&&i.push(t)}))}}}else this.contributions.forEach((function(e){var t=e.collectDefaultCompletions(r.uri,o);t&&i.push(t)}))},e.prototype.addSchemaValueCompletions=function(e,t,n,r){var o=this;"object"==typeof e&&(this.addEnumValueCompletions(e,t,n),this.addDefaultValueCompletions(e,t,n),this.collectTypes(e,r),Array.isArray(e.allOf)&&e.allOf.forEach((function(e){return o.addSchemaValueCompletions(e,t,n,r)})),Array.isArray(e.anyOf)&&e.anyOf.forEach((function(e){return o.addSchemaValueCompletions(e,t,n,r)})),Array.isArray(e.oneOf)&&e.oneOf.forEach((function(e){return o.addSchemaValueCompletions(e,t,n,r)})))},e.prototype.addDefaultValueCompletions=function(e,t,n,r){var o=this;void 0===r&&(r=0);var i=!1;if(b(e.default)){for(var s=e.type,a=e.default,c=r;c>0;c--)a=[a],s="array";n.add({kind:this.getSuggestionKind(s),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,t),insertTextFormat:O.InsertTextFormat.Snippet,detail:ee("json.suggest.default","Default value")}),i=!0}Array.isArray(e.examples)&&e.examples.forEach((function(s){for(var a=e.type,c=s,u=r;u>0;u--)c=[c],a="array";n.add({kind:o.getSuggestionKind(a),label:o.getLabelForValue(c),insertText:o.getInsertTextForValue(c,t),insertTextFormat:O.InsertTextFormat.Snippet}),i=!0})),Array.isArray(e.defaultSnippets)&&e.defaultSnippets.forEach((function(s){var a,c,u=e.type,l=s.body,f=s.label;if(b(l)){e.type;for(var p=r;p>0;p--)l=[l],"array";a=o.getInsertTextForSnippetValue(l,t),c=o.getFilterTextForSnippetValue(l),f=f||o.getLabelForSnippetValue(l)}else if("string"==typeof s.bodyText){var d="",h="",m="";for(p=r;p>0;p--)d=d+m+"[\n",h=h+"\n"+m+"]",m+="\t",u="array";a=d+m+s.bodyText.split("\n").join("\n"+m)+h+t,f=f||o.sanitizeLabel(a),c=a.replace(/[\n]/g,"")}n.add({kind:o.getSuggestionKind(u),label:f,documentation:o.fromMarkup(s.markdownDescription)||s.description,insertText:a,insertTextFormat:O.InsertTextFormat.Snippet,filterText:c}),i=!0})),i||"object"!=typeof e.items||Array.isArray(e.items)||this.addDefaultValueCompletions(e.items,t,n,r+1)},e.prototype.addEnumValueCompletions=function(e,t,n){if(b(e.const)&&n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t),insertTextFormat:O.InsertTextFormat.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(var r=0,o=e.enum.length;r<o;r++){var i=e.enum[r],s=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&r<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?s=this.fromMarkup(e.markdownEnumDescriptions[r]):e.enumDescriptions&&r<e.enumDescriptions.length&&(s=e.enumDescriptions[r]),n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(i),insertText:this.getInsertTextForValue(i,t),insertTextFormat:O.InsertTextFormat.Snippet,documentation:s})}},e.prototype.collectTypes=function(e,t){if(!Array.isArray(e.enum)&&!b(e.const)){var n=e.type;Array.isArray(n)?n.forEach((function(e){return t[e]=!0})):t[n]=!0}},e.prototype.addFillerValueCompletions=function(e,t,n){e.object&&n.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},t),insertTextFormat:O.InsertTextFormat.Snippet,detail:ee("defaults.object","New object"),documentation:""}),e.array&&n.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],t),insertTextFormat:O.InsertTextFormat.Snippet,detail:ee("defaults.array","New array"),documentation:""})},e.prototype.addBooleanValueCompletion=function(e,t,n){n.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t),insertTextFormat:O.InsertTextFormat.Snippet,documentation:""})},e.prototype.addNullValueCompletion=function(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:O.InsertTextFormat.Snippet,documentation:""})},e.prototype.addDollarSchemaCompletions=function(e,t){var n=this;this.schemaService.getRegisteredSchemaIds((function(e){return"http"===e||"https"===e})).forEach((function(r){return t.add({kind:O.CompletionItemKind.Module,label:n.getLabelForValue(r),filterText:n.getFilterTextForValue(r),insertText:n.getInsertTextForValue(r,e),insertTextFormat:O.InsertTextFormat.Snippet,documentation:""})}))},e.prototype.sanitizeLabel=function(e){return(e=e.replace(/[\n]/g,"â†µ")).length>57&&(e=e.substr(0,57).trim()+"..."),e},e.prototype.getLabelForValue=function(e){return this.sanitizeLabel(JSON.stringify(e))},e.prototype.getFilterTextForValue=function(e){return JSON.stringify(e)},e.prototype.getFilterTextForSnippetValue=function(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},e.prototype.getLabelForSnippetValue=function(e){var t=JSON.stringify(e);return t=t.replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1"),this.sanitizeLabel(t)},e.prototype.getInsertTextForPlainText=function(e){return e.replace(/[\\\$\}]/g,"\\$&")},e.prototype.getInsertTextForValue=function(e,t){var n=JSON.stringify(e,null,"\t");return"{}"===n?"{$1}"+t:"[]"===n?"[$1]"+t:this.getInsertTextForPlainText(n+t)},e.prototype.getInsertTextForSnippetValue=function(e,t){return function e(t,n,r){if(null!==t&&"object"==typeof t){var o=n+"\t";if(Array.isArray(t)){if(0===t.length)return"[]";for(var i="[\n",s=0;s<t.length;s++)i+=o+e(t[s],o,r),s<t.length-1&&(i+=","),i+="\n";return i+=n+"]"}var a=Object.keys(t);if(0===a.length)return"{}";for(i="{\n",s=0;s<a.length;s++){var c=a[s];i+=o+JSON.stringify(c)+": "+e(t[c],o,r),s<a.length-1&&(i+=","),i+="\n"}return i+=n+"}"}return r(t)}(e,"",(function(e){return"string"==typeof e&&"^"===e[0]?e.substr(1):JSON.stringify(e)}))+t},e.prototype.getInsertTextForGuessedValue=function(e,t){switch(typeof e){case"object":return null===e?"${1:null}"+t:this.getInsertTextForValue(e,t);case"string":var n=JSON.stringify(e);return n=n.substr(1,n.length-2),'"${1:'+(n=this.getInsertTextForPlainText(n))+'}"'+t;case"number":case"boolean":return"${1:"+JSON.stringify(e)+"}"+t}return this.getInsertTextForValue(e,t)},e.prototype.getSuggestionKind=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:null}if(!e)return O.CompletionItemKind.Value;switch(e){case"string":return O.CompletionItemKind.Value;case"object":return O.CompletionItemKind.Module;case"property":return O.CompletionItemKind.Property;default:return O.CompletionItemKind.Value}},e.prototype.getLabelTextForMatchingNode=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:return t.getText().substr(e.offset,e.length)}},e.prototype.getInsertTextForMatchingNode=function(e,t,n){switch(e.type){case"array":return this.getInsertTextForValue([],n);case"object":return this.getInsertTextForValue({},n);default:var r=t.getText().substr(e.offset,e.length)+n;return this.getInsertTextForPlainText(r)}},e.prototype.getInsertTextForProperty=function(e,t,n,r){var o=this.getInsertTextForValue(e,"");if(!n)return o;var i,s=o+": ",a=0;if(t){if(Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){var c=t.defaultSnippets[0].body;b(c)&&(i=this.getInsertTextForSnippetValue(c,""))}a+=t.defaultSnippets.length}if(t.enum&&(i||1!==t.enum.length||(i=this.getInsertTextForGuessedValue(t.enum[0],"")),a+=t.enum.length),b(t.default)&&(i||(i=this.getInsertTextForGuessedValue(t.default,"")),a++),Array.isArray(t.examples)&&t.examples.length&&(i||(i=this.getInsertTextForGuessedValue(t.examples[0],"")),a+=t.examples.length),0===a){var u=Array.isArray(t.type)?t.type[0]:t.type;switch(u||(t.properties?u="object":t.items&&(u="array")),u){case"boolean":i="$1";break;case"string":i='"$1"';break;case"object":i="{$1}";break;case"array":i="[$1]";break;case"number":case"integer":i="${1:0}";break;case"null":i="${1:null}";break;default:return o}}}return(!i||a>1)&&(i="$1"),s+i+r},e.prototype.getCurrentWord=function(e,t){for(var n=t-1,r=e.getText();n>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(r.charAt(n));)n--;return r.substring(n+1,t)},e.prototype.evaluateSeparatorAfter=function(e,t){var n=p(e.getText(),!0);switch(n.setPosition(t),n.scan()){case 5:case 2:case 4:case 17:return"";default:return","}},e.prototype.findItemAtOffset=function(e,t,n){for(var r=p(t.getText(),!0),o=e.items,i=o.length-1;i>=0;i--){var s=o[i];if(n>s.offset+s.length)return r.setPosition(s.offset+s.length),5===r.scan()&&n>=r.getTokenOffset()+r.getTokenLength()?i+1:i;if(n>=s.offset)return i}return 0},e.prototype.isInComment=function(e,t,n){var r=p(e.getText(),!1);r.setPosition(t);for(var o=r.scan();17!==o&&r.getTokenOffset()+r.getTokenLength()<n;)o=r.scan();return(12===o||13===o)&&r.getTokenOffset()<=n},e.prototype.fromMarkup=function(e){if(e&&this.doesSupportMarkdown())return{kind:O.MarkupKind.Markdown,value:e}},e.prototype.doesSupportMarkdown=function(){if(!b(this.supportsMarkdown)){var e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(O.MarkupKind.Markdown)}return this.supportsMarkdown},e.prototype.doesSupportsCommitCharacters=function(){if(!b(this.supportsCommitCharacters)){var e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsCommitCharacters=e&&e.completionItem&&!!e.completionItem.commitCharactersSupport}return this.supportsCommitCharacters},e}(),ne=function(){function e(e,t,n){void 0===t&&(t=[]),this.schemaService=e,this.contributions=t,this.promise=n||Promise}return e.prototype.doHover=function(e,t,n){var r=e.offsetAt(t),o=n.getNodeFromOffset(r);if(!o||("object"===o.type||"array"===o.type)&&r>o.offset+1&&r<o.offset+o.length-1)return this.promise.resolve(null);var i=o;if("string"===o.type){var s=o.parent;if(s&&"property"===s.type&&s.keyNode===o&&!(o=s.valueNode))return this.promise.resolve(null)}for(var a=O.Range.create(e.positionAt(i.offset),e.positionAt(i.offset+i.length)),c=function(e){return{contents:e,range:a}},u=G(o),l=this.contributions.length-1;l>=0;l--){var f=this.contributions[l].getInfoContribution(e.uri,u);if(f)return f.then((function(e){return c(e)}))}return this.schemaService.getSchemaForResource(e.uri,n).then((function(e){if(e){var t=n.getMatchingSchemas(e.schema,o.offset),r=null,i=null,s=null,a=null;t.every((function(e){if(e.node===o&&!e.inverted&&e.schema&&(r=r||e.schema.title,i=i||e.schema.markdownDescription||re(e.schema.description),e.schema.enum)){var t=e.schema.enum.indexOf(K(o));e.schema.markdownEnumDescriptions?s=e.schema.markdownEnumDescriptions[t]:e.schema.enumDescriptions&&(s=re(e.schema.enumDescriptions[t])),s&&"string"!=typeof(a=e.schema.enum[t])&&(a=JSON.stringify(a))}return!0}));var u="";return r&&(u=re(r)),i&&(u.length>0&&(u+="\n\n"),u+=i),s&&(u.length>0&&(u+="\n\n"),u+="`"+function(e){if(-1!==e.indexOf("`"))return"`` "+e+" ``";return e}(a)+"`: "+s),c([u])}return null}))},e}();function re(e){if(e)return e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}var oe,ie,se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();if("object"==typeof process)ie="win32"===process.platform;else if("object"==typeof navigator){var ae=navigator.userAgent;ie=ae.indexOf("Windows")>=0}var ce=/^\w[\w\d+.-]*$/,ue=/^\//,le=/^\/\//;var fe="/",pe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,de=function(){function e(e,t,n,r,o,i){void 0===i&&(i=!1),"object"==typeof e?(this.scheme=e.scheme||"",this.authority=e.authority||"",this.path=e.path||"",this.query=e.query||"",this.fragment=e.fragment||""):(this.scheme=function(e,t){return e||t?e:"file"}(e,i),this.authority=t||"",this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==fe&&(t=fe+t):t=fe}return t}(this.scheme,n||""),this.query=r||"",this.fragment=o||"",function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!ce.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!ue.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(le.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,i))}return e.isUri=function(t){return t instanceof e||!!t&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString)},Object.defineProperty(e.prototype,"fsPath",{get:function(){return be(this)},enumerable:!0,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,r=e.path,o=e.query,i=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=""),void 0===n?n=this.authority:null===n&&(n=""),void 0===r?r=this.path:null===r&&(r=""),void 0===o?o=this.query:null===o&&(o=""),void 0===i?i=this.fragment:null===i&&(i=""),t===this.scheme&&n===this.authority&&r===this.path&&o===this.query&&i===this.fragment?this:new me(t,n,r,o,i)},e.parse=function(e,t){void 0===t&&(t=!1);var n=pe.exec(e);return n?new me(n[2]||"",decodeURIComponent(n[4]||""),decodeURIComponent(n[5]||""),decodeURIComponent(n[7]||""),decodeURIComponent(n[9]||""),t):new me("","","","","")},e.file=function(e){var t="";if(ie&&(e=e.replace(/\\/g,fe)),e[0]===fe&&e[1]===fe){var n=e.indexOf(fe,2);-1===n?(t=e.substring(2),e=fe):(t=e.substring(2,n),e=e.substring(n)||fe)}return new me("file",t,e,"","")},e.from=function(e){return new me(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),Se(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new me(t);return n._formatted=t.external,n._fsPath=t._sep===he?t.fsPath:null,n}return t},e}(),he=ie?1:void 0,me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return se(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=be(this)),this._fsPath},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?Se(this,!0):(this._formatted||(this._formatted=Se(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=he),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(de),ge=((oe={})[58]="%3A",oe[47]="%2F",oe[63]="%3F",oe[35]="%23",oe[91]="%5B",oe[93]="%5D",oe[64]="%40",oe[33]="%21",oe[36]="%24",oe[38]="%26",oe[39]="%27",oe[40]="%28",oe[41]="%29",oe[42]="%2A",oe[43]="%2B",oe[44]="%2C",oe[59]="%3B",oe[61]="%3D",oe[32]="%20",oe);function ye(e,t){for(var n=void 0,r=-1,o=0;o<e.length;o++){var i=e.charCodeAt(o);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||t&&47===i)-1!==r&&(n+=encodeURIComponent(e.substring(r,o)),r=-1),void 0!==n&&(n+=e.charAt(o));else{void 0===n&&(n=e.substr(0,o));var s=ge[i];void 0!==s?(-1!==r&&(n+=encodeURIComponent(e.substring(r,o)),r=-1),n+=s):-1===r&&(r=o)}}return-1!==r&&(n+=encodeURIComponent(e.substring(r))),void 0!==n?n:e}function ve(e){for(var t=void 0,n=0;n<e.length;n++){var r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=ge[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function be(e){var t;return t=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path,ie&&(t=t.replace(/\//g,"\\")),t}function Se(e,t){var n=t?ve:ye,r="",o=e.scheme,i=e.authority,s=e.path,a=e.query,c=e.fragment;if(o&&(r+=o,r+=":"),(i||"file"===o)&&(r+=fe,r+=fe),i){var u=i.indexOf("@");if(-1!==u){var l=i.substr(0,u);i=i.substr(u+1),-1===(u=l.indexOf(":"))?r+=n(l,!1):(r+=n(l.substr(0,u),!1),r+=":",r+=n(l.substr(u+1),!1)),r+="@"}-1===(u=(i=i.toLowerCase()).indexOf(":"))?r+=n(i,!1):(r+=n(i.substr(0,u),!1),r+=i.substr(u))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(f=s.charCodeAt(1))>=65&&f<=90&&(s="/"+String.fromCharCode(f+32)+":"+s.substr(3));else if(s.length>=2&&58===s.charCodeAt(1)){var f;(f=s.charCodeAt(0))>=65&&f<=90&&(s=String.fromCharCode(f+32)+":"+s.substr(2))}r+=n(s,!0)}return a&&(r+="?",r+=n(a,!1)),c&&(r+="#",r+=t?c:ye(c,!1)),r}var Te=_.loadMessageBundle(),Ce=function(){function e(e){try{this.patternRegExp=new RegExp(function(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}(e)+"$")}catch(e){this.patternRegExp=null}this.schemas=[]}return e.prototype.addSchema=function(e){this.schemas.push(e)},e.prototype.matchesPattern=function(e){return this.patternRegExp&&this.patternRegExp.test(e)},e.prototype.getSchemas=function(){return this.schemas},e}(),xe=function(){function e(e,t,n){this.service=e,this.url=t,this.dependencies={},n&&(this.unresolvedSchema=this.service.promise.resolve(new Oe(n)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then((function(t){return e.service.resolveSchemaContent(t,e.url,e.dependencies)}))),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=null,this.unresolvedSchema=null,this.dependencies={}},e}(),Oe=function(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t},ke=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){return U(this.getSectionRecursive(e,this.schema))},e.prototype.getSectionRecursive=function(e,t){if(!t||"boolean"==typeof t||0===e.length)return t;var n=e.shift();if(t.properties&&(t.properties[n],1))return this.getSectionRecursive(e,t.properties[n]);if(t.patternProperties)for(var r=0,o=Object.keys(t.patternProperties);r<o.length;r++){var i=o[r];if(new RegExp(i).test(n))return this.getSectionRecursive(e,t.patternProperties[i])}else{if("object"==typeof t.additionalProperties)return this.getSectionRecursive(e,t.additionalProperties);if(n.match("[0-9]+"))if(Array.isArray(t.items)){var s=parseInt(n,10);if(!isNaN(s)&&t.items[s])return this.getSectionRecursive(e,t.items[s])}else if(t.items)return this.getSectionRecursive(e,t.items)}return null},e}(),Re=function(){function e(e,t,n){this.contextService=t,this.requestService=e,this.promiseConstructor=n||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations={},this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={}}return e.prototype.getRegisteredSchemaIds=function(e){return Object.keys(this.registeredSchemasIds).filter((function(t){var n=de.parse(t).scheme;return"schemaservice"!==n&&(!e||e(n))}))},Object.defineProperty(e.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){for(var t=this,n=!1,r=[e=this.normalizeId(e)],o=Object.keys(this.schemasById).map((function(e){return t.schemasById[e]}));r.length;)for(var i=r.pop(),s=0;s<o.length;s++){var a=o[s];a&&(a.url===i||a.dependencies[i])&&(a.url!==i&&r.push(a.url),a.clearSchema(),o[s]=void 0,n=!0)}return n},e.prototype.normalizeId=function(e){try{return de.parse(e).toString()}catch(t){return e}},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var n in t){var r=this.normalizeId(n);this.contributionSchemas[r]=this.addSchemaHandle(r,t[n])}}if(e.schemaAssociations){var o=e.schemaAssociations;for(var i in o){var s=o[i];this.contributionAssociations[i]=s;for(var a=this.getOrAddFilePatternAssociation(i),c=0,u=s;c<u.length;c++){var l=u[c];n=this.normalizeId(l);a.addSchema(n)}}}},e.prototype.addSchemaHandle=function(e,t){var n=new xe(this,e,t);return this.schemasById[e]=n,n},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.getOrAddFilePatternAssociation=function(e){var t=this.filePatternAssociationById[e];return t||(t=new Ce(e),this.filePatternAssociationById[e]=t,this.filePatternAssociations.push(t)),t},e.prototype.registerExternalSchema=function(e,t,n){void 0===t&&(t=null);var r=this.normalizeId(e);if(this.registeredSchemasIds[r]=!0,t)for(var o=0,i=t;o<i.length;o++){var s=i[o];this.getOrAddFilePatternAssociation(s).addSchema(r)}return n?this.addSchemaHandle(r,n):this.getOrAddSchemaHandle(r)},e.prototype.clearExternalSchemas=function(){for(var e in this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={},this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(var t in this.contributionAssociations)for(var n=this.getOrAddFilePatternAssociation(t),r=0,o=this.contributionAssociations[t];r<o.length;r++){var i=o[r];e=this.normalizeId(i);n.addSchema(e)}},e.prototype.getResolvedSchema=function(e){var t=this.normalizeId(e),n=this.schemasById[t];return n?n.getResolvedSchema():this.promise.resolve(null)},e.prototype.loadSchema=function(e){if(!this.requestService){var t=Te("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",Pe(e));return this.promise.resolve(new Oe({},[t]))}return this.requestService(e).then((function(t){if(!t){var n=Te("json.schema.nocontent","Unable to load schema from '{0}': No content.",Pe(e));return new Oe({},[n])}var r,o=[];r=d(t,o);var i=o.length?[Te("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",Pe(e),o[0].offset)]:[];return new Oe(r,i)}),(function(t){var n=t.toString(),r=t.toString().split("Error: ");return r.length>1&&(n=r[1]),Z(n,".")&&(n=n.substr(0,n.length-1)),new Oe({},[Te("json.schema.nocontent","Unable to load schema from '{0}': {1}.",Pe(e),n)])}))},e.prototype.resolveSchemaContent=function(e,t,n){var r=this,o=e.errors.slice(0),i=e.schema;if(i.$schema){var s=this.normalizeId(i.$schema);if("http://json-schema.org/draft-03/schema"===s)return this.promise.resolve(new ke({},[Te("json.schema.draft03.notsupported","Draft-03 schemas are not supported.")]));"https://json-schema.org/draft/2019-09/schema"===s&&e.errors.push(Te("json.schema.draft201909.notsupported","Draft 2019-09 schemas are not yet fully supported."))}var a=this.contextService,c=function(e,t,n,r){var i=function(e,t){if(!t)return e;var n=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some((function(e){return!(n=n[e])})),n}(t,r);if(i)for(var s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=i[s]);else o.push(Te("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",r,n))},u=function(e,t,n,i,s){a&&!/^\w+:\/\/.*/.test(t)&&(t=a.resolveRelativePath(t,i)),t=r.normalizeId(t);var u=r.getOrAddSchemaHandle(t);return u.getUnresolvedSchema().then((function(r){if(s[t]=!0,r.errors.length){var i=n?t+"#"+n:t;o.push(Te("json.schema.problemloadingref","Problems loading reference '{0}': {1}",i,r.errors[0]))}return c(e,r.schema,t,n),l(e,r.schema,t,u.dependencies)}))},l=function(e,t,n,o){if(!e||"object"!=typeof e)return Promise.resolve(null);for(var i=[e],s=[],a=[],l=function(e){for(var r=[];e.$ref;){var s=e.$ref,l=s.split("#",2);if(delete e.$ref,l[0].length>0)return void a.push(u(e,l[0],l[1],n,o));-1===r.indexOf(s)&&(c(e,t,n,l[1]),r.push(s))}!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var o=r[n];"object"==typeof o&&i.push(o)}}(e.items,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var o=r[n];if("object"==typeof o)for(var s in o){var a=o[s];"object"==typeof a&&i.push(a)}}}(e.definitions,e.properties,e.patternProperties,e.dependencies),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var o=r[n];if(Array.isArray(o))for(var s=0,a=o;s<a.length;s++){var c=a[s];"object"==typeof c&&i.push(c)}}}(e.anyOf,e.allOf,e.oneOf,e.items)};i.length;){var f=i.pop();s.indexOf(f)>=0||(s.push(f),l(f))}return r.promise.all(a)};return l(i,i,t,n).then((function(e){return new ke(i,o)}))},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var n=t.root.properties.filter((function(e){return"$schema"===e.keyNode.value&&e.valueNode&&"string"===e.valueNode.type}));if(n.length>0){var r=K(n[0].valueNode);if(r&&function(e,t){if(e.length<t.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}(r,".")&&this.contextService&&(r=this.contextService.resolveRelativePath(r,e)),r){var o=this.normalizeId(r);return this.getOrAddSchemaHandle(o).getResolvedSchema()}}}for(var i=Object.create(null),s=[],a=0,c=this.filePatternAssociations;a<c.length;a++){var u=c[a];if(u.matchesPattern(e))for(var l=0,f=u.getSchemas();l<f.length;l++){var p=f[l];i[p]||(s.push(p),i[p]=!0)}}return s.length>0?this.createCombinedSchema(e,s).getResolvedSchema():this.promise.resolve(null)},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var n="schemaservice://combinedSchema/"+encodeURIComponent(e),r={allOf:t.map((function(e){return{$ref:e}}))};return this.addSchemaHandle(n,r)},e}();function Pe(e){try{var t=de.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}var we=_.loadMessageBundle(),Ee=function(){function e(e,t){this.jsonSchemaService=e,this.promise=t,this.validationEnabled=!0}return e.prototype.configure=function(e){e&&(this.validationEnabled=e.validate,this.commentSeverity=e.allowComments?void 0:O.DiagnosticSeverity.Error)},e.prototype.doValidation=function(e,t,n,r){var o=this;if(!this.validationEnabled)return this.promise.resolve([]);var i=[],s={},a=function(e){var t=e.range.start.line+" "+e.range.start.character+" "+e.message;s[t]||(s[t]=!0,i.push(e))},c=function(r){var s=n?_e(n.trailingCommas):O.DiagnosticSeverity.Error,c=n?_e(n.comments):o.commentSeverity;if(r){if(r.errors.length&&t.root){var u=t.root,l="object"===u.type?u.properties[0]:null;if(l&&"$schema"===l.keyNode.value){var f=l.valueNode||l,p=O.Range.create(e.positionAt(f.offset),e.positionAt(f.offset+f.length));a(O.Diagnostic.create(p,r.errors[0],O.DiagnosticSeverity.Warning,C.SchemaResolveError))}else{p=O.Range.create(e.positionAt(u.offset),e.positionAt(u.offset+1));a(O.Diagnostic.create(p,r.errors[0],O.DiagnosticSeverity.Warning,C.SchemaResolveError))}}else{var d=t.validate(e,r.schema);d&&d.forEach(a)}(function e(t){if(t&&"object"==typeof t){if(S(t.allowComments))return t.allowComments;if(t.allOf)for(var n=0,r=t.allOf;n<r.length;n++){var o=r[n],i=e(o);if(S(i))return i}}return})(r.schema)&&(c=void 0),function e(t){if(t&&"object"==typeof t){if(S(t.allowTrailingCommas))return t.allowTrailingCommas;if(S(t.allowsTrailingCommas))return t.allowsTrailingCommas;if(t.allOf)for(var n=0,r=t.allOf;n<r.length;n++){var o=r[n],i=e(o);if(S(i))return i}}return}(r.schema)&&(s=void 0)}for(var h=0,m=t.syntaxErrors;h<m.length;h++){var g=m[h];if(g.code===C.TrailingComma){if("number"!=typeof s)continue;g.severity=s}a(g)}if("number"==typeof c){var y=we("InvalidCommentToken","Comments are not permitted in JSON.");t.comments.forEach((function(e){a(O.Diagnostic.create(e,y,c,C.CommentNotPermitted))}))}return i};if(r){var u=r.id||"schemaservice://untitled/"+Ne++;return this.jsonSchemaService.resolveSchemaContent(new Oe(r),u,{}).then((function(e){return c(e)}))}return this.jsonSchemaService.getSchemaForResource(e.uri,t).then((function(e){return c(e)}))},e}(),Ne=0;function _e(e){switch(e){case"error":return O.DiagnosticSeverity.Error;case"warning":return O.DiagnosticSeverity.Warning;case"ignore":return}}function De(e){return e<48?0:e<=57?e-48:(e<97&&(e+=32),e>=97&&e<=102?e-97+10:0)}function Ae(e){if("#"!==e[0])return null;switch(e.length){case 4:return{red:17*De(e.charCodeAt(1))/255,green:17*De(e.charCodeAt(2))/255,blue:17*De(e.charCodeAt(3))/255,alpha:1};case 5:return{red:17*De(e.charCodeAt(1))/255,green:17*De(e.charCodeAt(2))/255,blue:17*De(e.charCodeAt(3))/255,alpha:17*De(e.charCodeAt(4))/255};case 7:return{red:(16*De(e.charCodeAt(1))+De(e.charCodeAt(2)))/255,green:(16*De(e.charCodeAt(3))+De(e.charCodeAt(4)))/255,blue:(16*De(e.charCodeAt(5))+De(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*De(e.charCodeAt(1))+De(e.charCodeAt(2)))/255,green:(16*De(e.charCodeAt(3))+De(e.charCodeAt(4)))/255,blue:(16*De(e.charCodeAt(5))+De(e.charCodeAt(6)))/255,alpha:(16*De(e.charCodeAt(7))+De(e.charCodeAt(8)))/255}}return null}var qe=function(){function e(e){this.schemaService=e}return e.prototype.findDocumentSymbols=function(e,t,n){var r=this;void 0===n&&(n={resultLimit:Number.MAX_VALUE});var o=t.root;if(!o)return null;var i=n.resultLimit,s=e.uri;if(("vscode://defaultsettings/keybindings.json"===s||Z(s.toLowerCase(),"/user/keybindings.json"))&&"array"===o.type){for(var a=[],c=0,u=o.items;c<u.length;c++){var l=u[c];if("object"===l.type)for(var f=0,p=l.properties;f<p.length;f++){var d=p[f];if("key"===d.keyNode.value&&d.valueNode){var h=O.Location.create(e.uri,Ie(e,l));if(a.push({name:K(d.valueNode),kind:O.SymbolKind.Function,location:h}),--i<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),a}}}return a}for(var m=[{node:o,containerName:""}],g=0,y=!1,v=[],b=function(t,n){"array"===t.type?t.items.forEach((function(e){e&&m.push({node:e,containerName:n})})):"object"===t.type&&t.properties.forEach((function(t){var o=t.valueNode;if(o)if(i>0){i--;var s=O.Location.create(e.uri,Ie(e,t)),a=n?n+"."+t.keyNode.value:t.keyNode.value;v.push({name:r.getKeyLabel(t),kind:r.getSymbolKind(o.type),location:s,containerName:n}),m.push({node:o,containerName:a})}else y=!0}))};g<m.length;){var S=m[g++];b(S.node,S.containerName)}return y&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),v},e.prototype.findDocumentSymbols2=function(e,t,n){var r=this;void 0===n&&(n={resultLimit:Number.MAX_VALUE});var o=t.root;if(!o)return null;var i=n.resultLimit,s=e.uri;if(("vscode://defaultsettings/keybindings.json"===s||Z(s.toLowerCase(),"/user/keybindings.json"))&&"array"===o.type){for(var a=[],c=0,u=o.items;c<u.length;c++){var l=u[c];if("object"===l.type)for(var f=0,p=l.properties;f<p.length;f++){var d=p[f];if("key"===d.keyNode.value&&d.valueNode){var h=Ie(e,l),m=Ie(e,d.keyNode);if(a.push({name:K(d.valueNode),kind:O.SymbolKind.Function,range:h,selectionRange:m}),--i<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),a}}}return a}for(var g=[],y=[{node:o,result:g}],v=0,b=!1,S=function(t,n){"array"===t.type?t.items.forEach((function(t,o){if(t)if(i>0){i--;var s=Ie(e,t),a=s,c={name:String(o),kind:r.getSymbolKind(t.type),range:s,selectionRange:a,children:[]};n.push(c),y.push({result:c.children,node:t})}else b=!0})):"object"===t.type&&t.properties.forEach((function(t){var o=t.valueNode;if(o)if(i>0){i--;var s=Ie(e,t),a=Ie(e,t.keyNode),c={name:r.getKeyLabel(t),kind:r.getSymbolKind(o.type),range:s,selectionRange:a,children:[]};n.push(c),y.push({result:c.children,node:o})}else b=!0}))};v<y.length;){var T=y[v++];S(T.node,T.result)}return b&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),g},e.prototype.getSymbolKind=function(e){switch(e){case"object":return O.SymbolKind.Module;case"string":return O.SymbolKind.String;case"number":return O.SymbolKind.Number;case"array":return O.SymbolKind.Array;case"boolean":return O.SymbolKind.Boolean;default:return O.SymbolKind.Variable}},e.prototype.getKeyLabel=function(e){var t=e.keyNode.value;return t&&(t=t.replace(/[\n]/g,"â†µ")),t&&t.trim()?t:'"'+t+'"'},e.prototype.findDocumentColors=function(e,t,n){return this.schemaService.getSchemaForResource(e.uri,t).then((function(r){var o=[];if(r)for(var i=n&&"number"==typeof n.resultLimit?n.resultLimit:Number.MAX_VALUE,s={},a=0,c=t.getMatchingSchemas(r.schema);a<c.length;a++){var u=c[a];if(!u.inverted&&u.schema&&("color"===u.schema.format||"color-hex"===u.schema.format)&&u.node&&"string"===u.node.type){var l=String(u.node.offset);if(!s[l]){var f=Ae(K(u.node));if(f){var p=Ie(e,u.node);o.push({color:f,range:p})}if(s[l]=!0,--i<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(e.uri),o}}}return o}))},e.prototype.getColorPresentations=function(e,t,n,r){var o,i=[],s=Math.round(255*n.red),a=Math.round(255*n.green),c=Math.round(255*n.blue);function u(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}return o=1===n.alpha?"#"+u(s)+u(a)+u(c):"#"+u(s)+u(a)+u(c)+u(Math.round(255*n.alpha)),i.push({label:o,textEdit:O.TextEdit.replace(r,JSON.stringify(o))}),i},e}();function Ie(e,t){return O.Range.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}var Me=_.loadMessageBundle(),je={schemaAssociations:{},schemas:{"http://json-schema.org/draft-04/schema#":{title:Me("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"http://json-schema.org/draft-07/schema#":{title:Me("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},Fe={id:Me("schema.json.id","A unique identifier for the schema."),$schema:Me("schema.json.$schema","The schema to verify this document against."),title:Me("schema.json.title","A descriptive title of the element."),description:Me("schema.json.description","A long description of the element. Used in hover menus and suggestions."),default:Me("schema.json.default","A default value. Used by suggestions."),multipleOf:Me("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:Me("schema.json.maximum","The maximum numerical value, inclusive by default."),exclusiveMaximum:Me("schema.json.exclusiveMaximum","Makes the maximum property exclusive."),minimum:Me("schema.json.minimum","The minimum numerical value, inclusive by default."),exclusiveMinimum:Me("schema.json.exclusiveMininum","Makes the minimum property exclusive."),maxLength:Me("schema.json.maxLength","The maximum length of a string."),minLength:Me("schema.json.minLength","The minimum length of a string."),pattern:Me("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored."),additionalItems:Me("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail."),items:Me("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:Me("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive."),minItems:Me("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive."),uniqueItems:Me("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false."),maxProperties:Me("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive."),minProperties:Me("schema.json.minProperties","The minimum number of properties an object can have. Inclusive."),required:Me("schema.json.required","An array of strings that lists the names of all properties required on this object."),additionalProperties:Me("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail."),definitions:Me("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:Me("schema.json.properties","A map of property names to schemas for each property."),patternProperties:Me("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties."),dependencies:Me("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:Me("schema.json.enum","The set of literal values that are valid."),type:Me("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:Me("schema.json.format","Describes the format expected for the value."),allOf:Me("schema.json.allOf","An array of schemas, all of which must match."),anyOf:Me("schema.json.anyOf","An array of schemas, where at least one must match."),oneOf:Me("schema.json.oneOf","An array of schemas, exactly one of which must match."),not:Me("schema.json.not","A schema which must not match."),$id:Me("schema.json.$id","A unique identifier for the schema."),$ref:Me("schema.json.$ref","Reference a definition hosted on any location."),$comment:Me("schema.json.$comment","Comments from schema authors to readers or maintainers of the schema."),readOnly:Me("schema.json.readOnly","Indicates that the value of the instance is managed exclusively by the owning authority."),examples:Me("schema.json.examples","Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:Me("schema.json.contains",'An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:Me("schema.json.propertyNames","If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:Me("schema.json.const","An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:Me("schema.json.contentMediaType","Describes the media type of a string property."),contentEncoding:Me("schema.json.contentEncoding","Describes the content encoding of a string property."),if:Me("schema.json.if",'The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:Me("schema.json.then",'The "if" subschema is used for validation when the "if" subschema succeeds.'),else:Me("schema.json.else",'The "else" subschema is used for validation when the "if" subschema fails.')};for(var Le in je.schemas){var $e=je.schemas[Le];for(var Ve in $e.properties){var We=$e.properties[Ve];!0===We&&(We=$e.properties[Ve]={});var Ue=Fe[Ve];Ue?We.description=Ue:console.log(Ve+": localize('schema.json."+Ve+'\', "")')}}function He(e,t){var n=[],r=[],o=[],i=-1,s=p(e.getText(),!1),a=s.scan();function c(e){n.push(e),r.push(o.length)}for(;17!==a;){switch(a){case 1:case 3:var u={startLine:d=e.positionAt(s.getTokenOffset()).line,endLine:d,kind:1===a?"object":"array"};o.push(u);break;case 2:case 4:var l=2===a?"object":"array";if(o.length>0&&o[o.length-1].kind===l){u=o.pop();var f=e.positionAt(s.getTokenOffset()).line;u&&f>u.startLine+1&&i!==u.startLine&&(u.endLine=f-1,c(u),i=u.startLine)}break;case 13:var d=e.positionAt(s.getTokenOffset()).line,h=e.positionAt(s.getTokenOffset()+s.getTokenLength()).line;1===s.getTokenError()&&d+1<e.lineCount?s.setPosition(e.offsetAt(O.Position.create(d+1,0))):d<h&&(c({startLine:d,endLine:h,kind:O.FoldingRangeKind.Comment}),i=d);break;case 12:var m=e.getText().substr(s.getTokenOffset(),s.getTokenLength()).match(/^\/\/\s*#(region\b)|(endregion\b)/);if(m){f=e.positionAt(s.getTokenOffset()).line;if(m[1]){u={startLine:f,endLine:f,kind:O.FoldingRangeKind.Region};o.push(u)}else{for(var g=o.length-1;g>=0&&o[g].kind!==O.FoldingRangeKind.Region;)g--;if(g>=0){u=o[g];o.length=g,f>u.startLine&&i!==u.startLine&&(u.endLine=f,c(u),i=u.startLine)}}}}a=s.scan()}var y=t&&t.rangeLimit;if("number"!=typeof y||n.length<=y)return n;t&&t.onRangeLimitExceeded&&t.onRangeLimitExceeded(e.uri);for(var v=[],b=0,S=r;b<S.length;b++){(R=S[b])<30&&(v[R]=(v[R]||0)+1)}var T=0,C=0;for(g=0;g<v.length;g++){var x=v[g];if(x){if(x+T>y){C=g;break}T+=x}}var k=[];for(g=0;g<n.length;g++){var R;"number"==typeof(R=r[g])&&(R<C||R===C&&T++<y)&&k.push(n[g])}return k}function Be(e,t,n){function r(t,n){return O.Range.create(e.positionAt(t),e.positionAt(n))}var o=p(e.getText(),!0);function i(e,t){return o.setPosition(e),o.scan()===t?o.getTokenOffset()+o.getTokenLength():-1}return t.map((function(t){for(var o=e.offsetAt(t),s=n.getNodeFromOffset(o,!0),a=[];s;){switch(s.type){case"string":case"object":case"array":var c=s.offset+1,u=s.offset+s.length-1;c<u&&o>=c&&o<=u&&a.push(r(c,u)),a.push(r(s.offset,s.offset+s.length));break;case"number":case"boolean":case"null":case"property":a.push(r(s.offset,s.offset+s.length))}if("property"===s.type||s.parent&&"array"===s.parent.type){var l=i(s.offset+s.length,5);-1!==l&&a.push(r(s.offset,l))}s=s.parent}for(var f=void 0,p=a.length-1;p>=0;p--)f=O.SelectionRange.create(a[p],f);return f||(f=O.SelectionRange.create(O.Range.create(t,t))),f}))}function ze(e){var t=e.promiseConstructor||Promise,n=new Re(e.schemaRequestService,e.workspaceContext,t);n.setSchemaContributions(je);var r=new te(n,e.contributions,t,e.clientCapabilities),o=new ne(n,e.contributions,t),i=new qe(n),s=new Ee(n,t);return{configure:function(e){n.clearExternalSchemas(),e.schemas&&e.schemas.forEach((function(e){n.registerExternalSchema(e.uri,e.fileMatch,e.schema)})),s.configure(e)},resetSchema:function(e){return n.onResourceChange(e)},doValidation:s.doValidation.bind(s),parseJSONDocument:function(e){return Y(e,{collectComments:!0})},newJSONDocument:function(e,t){return function(e,t){return void 0===t&&(t=[]),new X(e,t,[])}(e,t)},doResolve:r.doResolve.bind(r),doComplete:r.doComplete.bind(r),findDocumentSymbols:i.findDocumentSymbols.bind(i),findDocumentSymbols2:i.findDocumentSymbols2.bind(i),findColorSymbols:function(e,t){return i.findDocumentColors(e,t).then((function(e){return e.map((function(e){return e.range}))}))},findDocumentColors:i.findDocumentColors.bind(i),getColorPresentations:i.getColorPresentations.bind(i),doHover:o.doHover.bind(o),getFoldingRanges:He,getSelectionRanges:Be,format:function(e,t,n){var r=void 0;if(t){var o=e.offsetAt(t.start);r={offset:o,length:e.offsetAt(t.end)-o}}var i={tabSize:n?n.tabSize:4,insertSpaces:!n||n.insertSpaces,eol:"\n"};return function(e,t,n){return a(e,t,n)}(e.getText(),r,i).map((function(t){return O.TextEdit.replace(O.Range.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length)),t.content)}))}}}},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,s,a,c,u=n(2),l=n(10),f=Object.prototype.toString;function p(e){return void 0!==e}function d(e){return"[object Number]"===f.call(e)}function h(e){return"[object String]"===f.call(e)}function m(e){return JSON.parse(l.readFileSync(e,"utf8"))}function g(e,t){return c&&(e="ï¼»"+e.replace(/[aouei]/g,"$&$&")+"ï¼½"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,n){var r=n[0],o=t[r],i=e;return"string"==typeof o?i=o:"number"!=typeof o&&"boolean"!=typeof o&&null!=o||(i=String(o)),i}))}function y(e){return function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return d(t)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):g(e[t],r):h(n)?(console.warn("Message "+n+" didn't get externalized correctly."),g(n,r)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function v(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return g(t,n)}function b(e,t){return s[e]=t,t}function S(e,t){var n,r,o,i=u.join(a.cacheRoot,e.id+"-"+e.hash+".json"),s=!1,c=!1;try{return n=JSON.parse(l.readFileSync(i,{encoding:"utf8",flag:"r"})),r=i,o=new Date,l.utimes(r,o,o,(function(){})),n}catch(e){if("ENOENT"===e.code)c=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),l.unlink(i,(function(e){e&&console.error("Deleting corrupted bundle "+i+" failed.")})),s=!0}}if(!(n=function(e,t){var n=a.translationsConfig[e.id];if(n){var r=m(n).contents,o=m(u.join(t,"nls.metadata.json")),i=Object.create(null);for(var s in o){var c=o[s],l=r[e.outDir+"/"+s];if(l){for(var f=[],p=0;p<c.keys.length;p++){var d=c.keys[p],g=l[h(d)?d:d.key];void 0===g&&(g=c.messages[p]),f.push(g)}i[s]=f}else i[s]=c.messages}return i}}(e,t))||s)return n;if(c)try{l.writeFileSync(i,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return n;throw e}return n}function T(e){try{return function(e){var t=m(u.join(e,"nls.metadata.json")),n=Object.create(null);for(var r in t){var o=t[r];n[r]=o.messages}return n}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function C(e,t){var n;if(!0===a.languagePackSupport&&void 0!==a.cacheRoot&&void 0!==a.languagePackId&&void 0!==a.translationsConfigFile&&void 0!==a.translationsConfig)try{n=S(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!n){if(a.languagePackSupport)return T(t);var r=function(e){for(var t=a.language;t;){var n=u.join(e,"nls.bundle."+t+".json");if(l.existsSync(n))return n;var r=t.lastIndexOf("-");t=r>0?t.substring(0,r):void 0}if(void 0===t){n=u.join(e,"nls.bundle.json");if(l.existsSync(n))return n}}(t);if(r)try{return m(r)}catch(e){console.log("Loading in the box message bundle failed.",e)}n=T(t)}return n}function x(e){if(!e)return v;var t=u.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),a.messageFormat===r.both||a.messageFormat===r.bundle){var n=function(e){for(var t,n=u.dirname(e);t=u.join(n,"nls.metadata.header.json"),!l.existsSync(t);){var r=u.dirname(n);if(r===n){t=void 0;break}n=r}return t}(e);if(n){var o=u.dirname(n),i=s[o];if(void 0===i)try{var f=JSON.parse(l.readFileSync(n,"utf8"));try{var d=C(f,o);i=b(o,d?{header:f,nlsBundle:d}:null)}catch(e){console.error("Failed to load nls bundle",e),i=b(o,null)}}catch(e){console.error("Failed to read header file",e),i=b(o,null)}if(i){var h=e.substr(o.length+1).replace(/\\/g,"/"),g=i.nlsBundle[h];return void 0===g?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):y(g)}}}if(a.messageFormat===r.both||a.messageFormat===r.file)try{var S=m(function(e){var t;if(a.cacheLanguageResolution&&t)t=t;else{if(c||!a.language)t=".nls.json";else for(var n=a.language;n;){var r=".nls."+n+".json";if(l.existsSync(e+r)){t=r;break}var o=n.lastIndexOf("-");o>0?n=n.substring(0,o):(t=".nls.json",n=null)}a.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(S)?y(S):p(S.messages)&&p(S.keys)?y(S.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(r=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(o=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&p(t.key)&&p(t.comment)}}(i||(i={})),function(){if(a={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:r.bundle},h(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var n=e.availableLanguages["*"];h(n)&&(t=n)}if(h(e.locale)&&(a.locale=e.locale.toLowerCase()),void 0===t?a.language=a.locale:"en"!==t&&(a.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(a.languagePackSupport=e._languagePackSupport),h(e._cacheRoot)&&(a.cacheRoot=e._cacheRoot),h(e._languagePackId)&&(a.languagePackId=e._languagePackId),h(e._translationsConfigFile)){a.translationsConfigFile=e._translationsConfigFile;try{a.translationsConfig=m(a.translationsConfigFile)}catch(t){e._corruptedFile&&l.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}}}catch(e){}c="pseudo"===a.locale,void 0,s=Object.create(null)}(),t.loadMessageBundle=x,t.config=function(e){return e&&(h(e.locale)&&(a.locale=e.locale.toLowerCase(),a.language=a.locale,void 0,s=Object.create(null)),void 0!==e.messageFormat&&(a.messageFormat=e.messageFormat),e.bundleFormat===o.standalone&&!0===a.languagePackSupport&&(a.languagePackSupport=!1)),c="pseudo"===a.locale,x}},50:function(e,t){e.exports=require("net")},51:function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))}},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16);t.Event=r.Event;const o=n(1885),i=n(1886),s=n(1887),a=n(578),c=n(579);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(16));const u=n(1888);!function(e){e.uriToFilePath=u.uriToFilePath,e.resolveGlobalNodePath=u.resolveGlobalNodePath,e.resolveGlobalYarnPath=u.resolveGlobalYarnPath,e.resolve=u.resolve,e.resolveModulePath=u.resolveModulePath}(t.Files||(t.Files={}));let l=!1,f=void 0;function p(e){if(null!==e)return e}!function(){function e(e){try{let t=parseInt(e);isNaN(t)||(f=setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(l?0:1)}},3e3))}catch(e){}}for(let t=2;t<process.argv.length;t++){let n=process.argv[t];if("--clientProcessId"===n&&t+1<process.argv.length)return void e(process.argv[t+1]);{let t=n.split("=");"--clientProcessId"===t[0]&&e(t[1])}}}();t.TextDocuments=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new r.Emitter,this._onDidOpen=new r.Emitter,this._onDidClose=new r.Emitter,this._onDidSave=new r.Emitter,this._onWillSave=new r.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=r.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=n;let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)}),e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges;if(0===n.length)return;let r=this._documents[t.uri];const{version:o}=t;if(null==o)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);r=this._configuration.update(r,n,o),this._documents[t.uri]=r,this._onDidChangeContent.fire(Object.freeze({document:r}))}),e.onDidCloseTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))}),e.onWillSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}),e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}),e.onDidSaveTextDocument(e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))})}};t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};class d{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(r.MessageType.Error,e)}warn(e){this.send(r.MessageType.Warning,e)}info(e){this.send(r.MessageType.Info,e)}log(e){this.send(r.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(r.LogMessageNotification.type,{type:e,message:t})}}const h=s.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let n={type:r.MessageType.Error,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(p)}showWarningMessage(e,...t){let n={type:r.MessageType.Warning,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(p)}showInformationMessage(e,...t){let n={type:r.MessageType.Info,message:e,actions:t};return this._connection.sendRequest(r.ShowMessageRequest.type,n).then(p)}});!function(e){e.create=function(){return new m}}(t.BulkRegistration||(t.BulkRegistration={}));class m{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const n=a.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);const r=c.generateUuid();this._registrations.push({id:r,method:n,registerOptions:t||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}}!function(e){e.create=function(){return new g(void 0,[])}}(t.BulkUnregistration||(t.BulkUnregistration={}));class g{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(r.UnregistrationRequest.type,t).then(void 0,e=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){const t=a.string(e)?e:e.method,n=this._unregistrations.get(t);if(!n)return!1;let o={unregisterations:[n]};return this._connection.sendRequest(r.UnregistrationRequest.type,o).then(()=>{this._unregistrations.delete(t)},e=>{this._connection.console.info(`Unregistering request handler for ${n.id} failed.`)}),!0}}class y{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof m?this.registerMany(e):e instanceof g?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,t,n){const o=a.string(t)?t:t.method,i=c.generateUuid();let s={registrations:[{id:i,method:o,registerOptions:n||{}}]};return e.isAttached||e.attach(this._connection),this._connection.sendRequest(r.RegistrationRequest.type,s).then(t=>(e.add({id:i,method:o}),e),e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e)))}registerSingle2(e,t){const n=a.string(e)?e:e.method,o=c.generateUuid();let i={registrations:[{id:o,method:n,registerOptions:t||{}}]};return this._connection.sendRequest(r.RegistrationRequest.type,i).then(e=>r.Disposable.create(()=>{this.unregisterSingle(o,n)}),e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e)))}unregisterSingle(e,t){let n={unregisterations:[{id:e,method:t}]};return this._connection.sendRequest(r.UnregistrationRequest.type,n).then(void 0,t=>{this.connection.console.info(`Unregistering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this._connection.sendRequest(r.RegistrationRequest.type,t).then(()=>new g(this._connection,t.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e)))}}const v=i.WorkspaceFoldersFeature(o.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(n=e)&&n.edit?e:{edit:e};var n;return this._connection.sendRequest(r.ApplyWorkspaceEditRequest.type,t)}}));class b{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this._connection.sendNotification(r.TelemetryEventNotification.type,e)}}class S{constructor(){this._trace=r.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==r.Trace.Off&&this._connection.sendNotification(r.LogTraceNotification.type,{message:e,verbose:this._trace===r.Trace.Verbose?t:void 0})}}class T{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return s.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return s.attachPartialResult(this.connection,t)}}function C(e,t){return function(n){return t(e(n))}}function x(e,t){return function(n){return t(e(n))}}function O(e,t){return function(n){return t(e(n))}}function k(e,t){return function(n){return t(e(n))}}function R(e,t){return function(n){return t(e(n))}}function P(e,t){return function(n){return t(e(n))}}function w(e,t){return function(n){return t(e(n))}}t.LanguagesImpl=T,t.combineConsoleFeatures=C,t.combineTelemetryFeatures=x,t.combineTracerFeatures=O,t.combineClientFeatures=k,t.combineWindowFeatures=R,t.combineWorkspaceFeatures=P,t.combineLanguagesFeatures=w,t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,C),tracer:n(e.tracer,t.tracer,O),telemetry:n(e.telemetry,t.telemetry,x),client:n(e.client,t.client,k),window:n(e.window,t.window,R),workspace:n(e.workspace,t.workspace,P)}},t.createConnection=function(e,t,n,o){let i,c,u,p;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=n,n=o),r.ConnectionStrategy.is(e)?p=e:(c=e,u=t,p=n),function(e,t,n,o){if(!e&&!t&&process.argv.length>2){let n=void 0,o=void 0,s=process.argv.slice(2);for(let a=0;a<s.length;a++){let c=s[a];if("--node-ipc"===c){e=new r.IPCMessageReader(process),t=new r.IPCMessageWriter(process);break}if("--stdio"===c){e=process.stdin,t=process.stdout;break}if("--socket"===c){n=parseInt(s[a+1]);break}if("--pipe"===c){o=s[a+1];break}var i=c.split("=");if("--socket"===i[0]){n=parseInt(i[1]);break}if("--pipe"===i[0]){o=i[1];break}}if(n){let o=r.createServerSocketTransport(n);e=o[0],t=o[1]}else if(o){let n=r.createServerPipeTransport(o);e=n[0],t=n[1]}}var c="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+c);if(!t)throw new Error("Connection output stream is not set. "+c);if(a.func(e.read)&&a.func(e.on)){let t=e;t.on("end",()=>{process.exit(l?0:1)}),t.on("close",()=>{process.exit(l?0:1)})}const u=o&&o.console?new(o.console(d)):new d,p=r.createProtocolConnection(e,t,u,n);u.rawAttach(p);const m=o&&o.tracer?new(o.tracer(S)):new S,g=o&&o.telemetry?new(o.telemetry(b)):new b,C=o&&o.client?new(o.client(y)):new y,x=o&&o.window?new(o.window(h)):new h,O=o&&o.workspace?new(o.workspace(v)):new v,k=o&&o.languages?new(o.languages(T)):new T,R=[u,m,g,C,x,O,k];function P(e){return e instanceof Promise?e:a.thenable(e)?new Promise((t,n)=>{e.then(e=>t(e),e=>n(e))}):Promise.resolve(e)}let w=void 0,E=void 0,N=void 0,_={listen:()=>p.listen(),sendRequest:(e,...t)=>p.sendRequest(a.string(e)?e:e.method,...t),onRequest:(e,t)=>p.onRequest(e,t),sendNotification:(e,t)=>{const n=a.string(e)?e:e.method;1===arguments.length?p.sendNotification(n):p.sendNotification(n,t)},onNotification:(e,t)=>p.onNotification(e,t),onProgress:p.onProgress,sendProgress:p.sendProgress,onInitialize:e=>E=e,onInitialized:e=>p.onNotification(r.InitializedNotification.type,e),onShutdown:e=>w=e,onExit:e=>N=e,get console(){return u},get telemetry(){return g},get tracer(){return m},get client(){return C},get window(){return x},get workspace(){return O},get languages(){return k},onDidChangeConfiguration:e=>p.onNotification(r.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>p.onNotification(r.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>p.onNotification(r.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>p.onNotification(r.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>p.onNotification(r.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>p.onNotification(r.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>p.onRequest(r.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>p.onNotification(r.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>p.sendNotification(r.PublishDiagnosticsNotification.type,e),onHover:e=>p.onRequest(r.HoverRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),void 0)),onCompletion:e=>p.onRequest(r.CompletionRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onCompletionResolve:e=>p.onRequest(r.CompletionResolveRequest.type,e),onSignatureHelp:e=>p.onRequest(r.SignatureHelpRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),void 0)),onDeclaration:e=>p.onRequest(r.DeclarationRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onDefinition:e=>p.onRequest(r.DefinitionRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onTypeDefinition:e=>p.onRequest(r.TypeDefinitionRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onImplementation:e=>p.onRequest(r.ImplementationRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onReferences:e=>p.onRequest(r.ReferencesRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onDocumentHighlight:e=>p.onRequest(r.DocumentHighlightRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onDocumentSymbol:e=>p.onRequest(r.DocumentSymbolRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onWorkspaceSymbol:e=>p.onRequest(r.WorkspaceSymbolRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onCodeAction:e=>p.onRequest(r.CodeActionRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onCodeLens:e=>p.onRequest(r.CodeLensRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onCodeLensResolve:e=>p.onRequest(r.CodeLensResolveRequest.type,(t,n)=>e(t,n)),onDocumentFormatting:e=>p.onRequest(r.DocumentFormattingRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),void 0)),onDocumentRangeFormatting:e=>p.onRequest(r.DocumentRangeFormattingRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),void 0)),onDocumentOnTypeFormatting:e=>p.onRequest(r.DocumentOnTypeFormattingRequest.type,(t,n)=>e(t,n)),onRenameRequest:e=>p.onRequest(r.RenameRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),void 0)),onPrepareRename:e=>p.onRequest(r.PrepareRenameRequest.type,(t,n)=>e(t,n)),onDocumentLinks:e=>p.onRequest(r.DocumentLinkRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onDocumentLinkResolve:e=>p.onRequest(r.DocumentLinkResolveRequest.type,(t,n)=>e(t,n)),onDocumentColor:e=>p.onRequest(r.DocumentColorRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onColorPresentation:e=>p.onRequest(r.ColorPresentationRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onFoldingRanges:e=>p.onRequest(r.FoldingRangeRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onSelectionRanges:e=>p.onRequest(r.SelectionRangeRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),s.attachPartialResult(p,t))),onExecuteCommand:e=>p.onRequest(r.ExecuteCommandRequest.type,(t,n)=>e(t,n,s.attachWorkDone(p,t),void 0)),dispose:()=>p.dispose()};for(let e of R)e.attach(_);return p.onRequest(r.InitializeRequest.type,e=>{const t=e.processId;a.number(t)&&void 0===f&&setInterval(()=>{try{process.kill(t,0)}catch(e){process.exit(l?0:1)}},3e3),a.string(e.trace)&&(m.trace=r.Trace.fromString(e.trace));for(let t of R)t.initialize(e.capabilities);if(E){return P(E(e,(new r.CancellationTokenSource).token,s.attachWorkDone(p,e),void 0)).then(e=>{if(e instanceof r.ResponseError)return e;let t=e;t||(t={capabilities:{}});let n=t.capabilities;n||(n={},t.capabilities=n),void 0===n.textDocumentSync||null===n.textDocumentSync?n.textDocumentSync=a.number(_.__textDocumentSync)?_.__textDocumentSync:r.TextDocumentSyncKind.None:a.number(n.textDocumentSync)||a.number(n.textDocumentSync.change)||(n.textDocumentSync.change=a.number(_.__textDocumentSync)?_.__textDocumentSync:r.TextDocumentSyncKind.None);for(let e of R)e.fillServerCapabilities(n);return t})}{let e={capabilities:{textDocumentSync:r.TextDocumentSyncKind.None}};for(let t of R)t.fillServerCapabilities(e.capabilities);return e}}),p.onRequest(r.ShutdownRequest.type,()=>(l=!0,w?w((new r.CancellationTokenSource).token):void 0)),p.onNotification(r.ExitNotification.type,()=>{try{N&&N()}finally{l?process.exit(0):process.exit(1)}}),p.onNotification(r.SetTraceNotification.type,e=>{m.trace=r.Trace.fromString(e.value)}),_}(c,u,p,i)};const E=n(1889),N=n(1890);!function(e){e.all={__brand:"features",languages:w(E.CallHierarchyFeature,N.SemanticTokensFeature)},e.SemanticTokensBuilder=N.SemanticTokensBuilder}(t.ProposedFeatures||(t.ProposedFeatures={}))},578:function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function o(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=o,t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&o(e.then)}},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class o extends r{constructor(){super([o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-","4",o._randomHex(),o._randomHex(),o._randomHex(),"-",o._oneOf(o._timeHighBits),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return o._oneOf(o._chars)}}function i(){return new o}o._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],o._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=i;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return s.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return i().asHex()}},64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,r=0,o=this._callbacks.length;r<o;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),r=this._contexts.slice(0),o=0,i=n.length;o<i;o++)try{t.push(n[o].apply(r[o],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{let i;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),i={dispose:()=>{this._callbacks.remove(e,t),i.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},7:function(e,t,n){"use strict";var r,o,i,s,a,c,u,l,f,p,d,h,m,g,y,v,b,S,T,C;n.r(t),n.d(t,"Position",(function(){return r})),n.d(t,"Range",(function(){return o})),n.d(t,"Location",(function(){return i})),n.d(t,"LocationLink",(function(){return s})),n.d(t,"Color",(function(){return a})),n.d(t,"ColorInformation",(function(){return c})),n.d(t,"ColorPresentation",(function(){return u})),n.d(t,"FoldingRangeKind",(function(){return l})),n.d(t,"FoldingRange",(function(){return f})),n.d(t,"DiagnosticRelatedInformation",(function(){return p})),n.d(t,"DiagnosticSeverity",(function(){return d})),n.d(t,"DiagnosticTag",(function(){return h})),n.d(t,"Diagnostic",(function(){return m})),n.d(t,"Command",(function(){return g})),n.d(t,"TextEdit",(function(){return y})),n.d(t,"TextDocumentEdit",(function(){return v})),n.d(t,"CreateFile",(function(){return b})),n.d(t,"RenameFile",(function(){return S})),n.d(t,"DeleteFile",(function(){return T})),n.d(t,"WorkspaceEdit",(function(){return C})),n.d(t,"WorkspaceChange",(function(){return Q})),n.d(t,"TextDocumentIdentifier",(function(){return x})),n.d(t,"VersionedTextDocumentIdentifier",(function(){return O})),n.d(t,"TextDocumentItem",(function(){return k})),n.d(t,"MarkupKind",(function(){return R})),n.d(t,"MarkupContent",(function(){return P})),n.d(t,"CompletionItemKind",(function(){return w})),n.d(t,"InsertTextFormat",(function(){return E})),n.d(t,"CompletionItemTag",(function(){return N})),n.d(t,"CompletionItem",(function(){return _})),n.d(t,"CompletionList",(function(){return D})),n.d(t,"MarkedString",(function(){return A})),n.d(t,"Hover",(function(){return q})),n.d(t,"ParameterInformation",(function(){return I})),n.d(t,"SignatureInformation",(function(){return M})),n.d(t,"DocumentHighlightKind",(function(){return j})),n.d(t,"DocumentHighlight",(function(){return F})),n.d(t,"SymbolKind",(function(){return L})),n.d(t,"SymbolTag",(function(){return $})),n.d(t,"SymbolInformation",(function(){return V})),n.d(t,"DocumentSymbol",(function(){return W})),n.d(t,"CodeActionKind",(function(){return U})),n.d(t,"CodeActionContext",(function(){return H})),n.d(t,"CodeAction",(function(){return B})),n.d(t,"CodeLens",(function(){return z})),n.d(t,"FormattingOptions",(function(){return K})),n.d(t,"DocumentLink",(function(){return G})),n.d(t,"SelectionRange",(function(){return J})),n.d(t,"EOL",(function(){return Z})),n.d(t,"TextDocument",(function(){return Y})),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return ee.objectLiteral(t)&&ee.number(t.line)&&ee.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,o){if(ee.number(e)&&ee.number(t)&&ee.number(n)&&ee.number(o))return{start:r.create(e,t),end:r.create(n,o)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+o+"]")},e.is=function(e){var t=e;return ee.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(o||(o={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ee.defined(t)&&o.is(t.range)&&(ee.string(t.uri)||ee.undefined(t.uri))}}(i||(i={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return ee.defined(t)&&o.is(t.targetRange)&&ee.string(t.targetUri)&&(o.is(t.targetSelectionRange)||ee.undefined(t.targetSelectionRange))&&(o.is(t.originSelectionRange)||ee.undefined(t.originSelectionRange))}}(s||(s={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return ee.number(t.red)&&ee.number(t.green)&&ee.number(t.blue)&&ee.number(t.alpha)}}(a||(a={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return o.is(t.range)&&a.is(t.color)}}(c||(c={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ee.string(t.label)&&(ee.undefined(t.textEdit)||y.is(t))&&(ee.undefined(t.additionalTextEdits)||ee.typedArray(t.additionalTextEdits,y.is))}}(u||(u={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(l||(l={})),function(e){e.create=function(e,t,n,r,o){var i={startLine:e,endLine:t};return ee.defined(n)&&(i.startCharacter=n),ee.defined(r)&&(i.endCharacter=r),ee.defined(o)&&(i.kind=o),i},e.is=function(e){var t=e;return ee.number(t.startLine)&&ee.number(t.startLine)&&(ee.undefined(t.startCharacter)||ee.number(t.startCharacter))&&(ee.undefined(t.endCharacter)||ee.number(t.endCharacter))&&(ee.undefined(t.kind)||ee.string(t.kind))}}(f||(f={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ee.defined(t)&&i.is(t.location)&&ee.string(t.message)}}(p||(p={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(d||(d={})),function(e){e.Unnecessary=1,e.Deprecated=2}(h||(h={})),function(e){e.create=function(e,t,n,r,o,i){var s={range:e,message:t};return ee.defined(n)&&(s.severity=n),ee.defined(r)&&(s.code=r),ee.defined(o)&&(s.source=o),ee.defined(i)&&(s.relatedInformation=i),s},e.is=function(e){var t=e;return ee.defined(t)&&o.is(t.range)&&ee.string(t.message)&&(ee.number(t.severity)||ee.undefined(t.severity))&&(ee.number(t.code)||ee.string(t.code)||ee.undefined(t.code))&&(ee.string(t.source)||ee.undefined(t.source))&&(ee.undefined(t.relatedInformation)||ee.typedArray(t.relatedInformation,p.is))}}(m||(m={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={title:e,command:t};return ee.defined(n)&&n.length>0&&(o.arguments=n),o},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.title)&&ee.string(t.command)}}(g||(g={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ee.objectLiteral(t)&&ee.string(t.newText)&&o.is(t.range)}}(y||(y={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ee.defined(t)&&O.is(t.textDocument)&&Array.isArray(t.edits)}}(v||(v={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&ee.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ee.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ee.boolean(t.options.ignoreIfExists)))}}(b||(b={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ee.string(t.oldUri)&&ee.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ee.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ee.boolean(t.options.ignoreIfExists)))}}(S||(S={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ee.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ee.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ee.boolean(t.options.ignoreIfNotExists)))}}(T||(T={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ee.string(e.kind)?b.is(e)||S.is(e)||T.is(e):v.is(e)})))}}(C||(C={}));var x,O,k,R,P,w,E,N,_,D,A,q,I,M,j,F,L,$,V,W,U,H,B,z,K,G,J,X=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(y.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(y.replace(e,t))},e.prototype.delete=function(e){this.edits.push(y.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),Q=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(v.is(e)){var n=new X(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new X(e.changes[n]);t._textEditChanges[n]=r})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(O.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:o=[]};this._workspaceEdit.documentChanges.push(n),r=new X(o),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var o=[];this._workspaceEdit.changes[e]=o,r=new X(o),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(b.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(S.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(T.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.uri)}}(x||(x={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.uri)&&(null===t.version||ee.number(t.version))}}(O||(O={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return ee.defined(t)&&ee.string(t.uri)&&ee.string(t.languageId)&&ee.number(t.version)&&ee.string(t.text)}}(k||(k={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(R||(R={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(R||(R={})),function(e){e.is=function(e){var t=e;return ee.objectLiteral(e)&&R.is(t.kind)&&ee.string(t.value)}}(P||(P={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(w||(w={})),function(e){e.PlainText=1,e.Snippet=2}(E||(E={})),function(e){e.Deprecated=1}(N||(N={})),function(e){e.create=function(e){return{label:e}}}(_||(_={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(D||(D={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ee.string(t)||ee.objectLiteral(t)&&ee.string(t.language)&&ee.string(t.value)}}(A||(A={})),function(e){e.is=function(e){var t=e;return!!t&&ee.objectLiteral(t)&&(P.is(t.contents)||A.is(t.contents)||ee.typedArray(t.contents,A.is))&&(void 0===e.range||o.is(e.range))}}(q||(q={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(I||(I={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o={label:e};return ee.defined(t)&&(o.documentation=t),ee.defined(n)?o.parameters=n:o.parameters=[],o}}(M||(M={})),function(e){e.Text=1,e.Read=2,e.Write=3}(j||(j={})),function(e){e.create=function(e,t){var n={range:e};return ee.number(t)&&(n.kind=t),n}}(F||(F={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(L||(L={})),function(e){e.Deprecated=1}($||($={})),function(e){e.create=function(e,t,n,r,o){var i={name:e,kind:t,location:{uri:r,range:n}};return o&&(i.containerName=o),i}}(V||(V={})),function(e){e.create=function(e,t,n,r,o,i){var s={name:e,detail:t,kind:n,range:r,selectionRange:o};return void 0!==i&&(s.children=i),s},e.is=function(e){var t=e;return t&&ee.string(t.name)&&ee.number(t.kind)&&o.is(t.range)&&o.is(t.selectionRange)&&(void 0===t.detail||ee.string(t.detail))&&(void 0===t.deprecated||ee.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(W||(W={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(U||(U={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return ee.defined(t)&&ee.typedArray(t.diagnostics,m.is)&&(void 0===t.only||ee.typedArray(t.only,ee.string))}}(H||(H={})),function(e){e.create=function(e,t,n){var r={title:e};return g.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&ee.string(t.title)&&(void 0===t.diagnostics||ee.typedArray(t.diagnostics,m.is))&&(void 0===t.kind||ee.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||g.is(t.command))&&(void 0===t.isPreferred||ee.boolean(t.isPreferred))&&(void 0===t.edit||C.is(t.edit))}}(B||(B={})),function(e){e.create=function(e,t){var n={range:e};return ee.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ee.defined(t)&&o.is(t.range)&&(ee.undefined(t.command)||g.is(t.command))}}(z||(z={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ee.defined(t)&&ee.number(t.tabSize)&&ee.boolean(t.insertSpaces)}}(K||(K={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ee.defined(t)&&o.is(t.range)&&(ee.undefined(t.target)||ee.string(t.target))}}(G||(G={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&o.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(J||(J={}));var Y,Z=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new te(e,t,n,r)},e.is=function(e){var t=e;return!!(ee.defined(t)&&ee.string(t.uri)&&(ee.undefined(t.languageId)||ee.string(t.languageId))&&ee.number(t.lineCount)&&ee.func(t.getText)&&ee.func(t.positionAt)&&ee.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,o=t.slice(0,r),i=t.slice(r);e(o,n),e(i,n);var s=0,a=0,c=0;for(;s<o.length&&a<i.length;){var u=n(o[s],i[a]);t[c++]=u<=0?o[s++]:i[a++]}for(;s<o.length;)t[c++]=o[s++];for(;a<i.length;)t[c++]=i[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=n.length,i=r.length-1;i>=0;i--){var s=r[i],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=o))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),o=a}return n}}(Y||(Y={}));var ee,te=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var o=t.charAt(r);n="\r"===o||"\n"===o,"\r"===o&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,o=t.length;if(0===o)return r.create(0,e);for(;n<o;){var i=Math.floor((n+o)/2);t[i]>e?o=i:n=i+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ee||(ee={}))},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Common:{Next:!0,End:!0,Comment:!0,InputPath:!0,OutputPath:!0,Type:!0},StateTypes:{Pass:{Properties:{Result:!0,ResultPath:!0,Parameters:!0},hasCommonProperties:!0},Task:{Properties:{Resource:!0,Parameters:!0,ResultPath:!0,TimeoutSeconds:!0,HeartbeatSeconds:!0,Retry:{"Fn:ArrayOf":"Retrier"},Catch:{"Fn:ArrayOf":"Catcher"}},hasCommonProperties:!0},Choice:{Properties:{Comment:!0,InputPath:!0,OutputPath:!0,Type:!0,Choices:{"Fn:ArrayOf":"ChoiceRule"},Default:!0}},Wait:{Properties:{Seconds:!0,Timestamp:!0,SecondsPath:!0,TimestampPath:!0},hasCommonProperties:!0},Succeed:{Properties:{Type:!0,Comment:!0,InputPath:!0,OutputPath:!0}},Fail:{Properties:{Cause:!0,Error:!0,Comment:!0,Type:!0}},Parallel:{Properties:{Branches:!0,ResultPath:!0,Parameters:!0,Retry:{"Fn:ArrayOf":"Retrier"},Catch:{"Fn:ArrayOf":"Catcher"}},hasCommonProperties:!0},Map:{Properties:{Iterator:!0,ItemsPath:!0,MaxConcurrency:!0,ResultPath:!0,Parameters:!0,Retry:{"Fn:ArrayOf":"Retrier"},Catch:{"Fn:ArrayOf":"Catcher"}},hasCommonProperties:!0}},ReferenceTypes:{ComparisonOperators:{And:{"Fn:ArrayOf":"NestedChoiceRule"},BooleanEquals:!0,Not:{"Fn:ValueOf":"NestedChoiceRule"},NumericEquals:!0,NumericGreaterThan:!0,NumericGreaterThanEquals:!0,NumericLessThan:!0,NumericLessThanEquals:!0,Or:{"Fn:ArrayOf":"NestedChoiceRule"},StringEquals:!0,StringGreaterThan:!0,StringGreaterThanEquals:!0,StringLessThan:!0,StringLessThanEquals:!0,TimestampEquals:!0,TimestampGreaterThan:!0,TimestampGreaterThanEquals:!0,TimestampLessThan:!0,TimestampLessThanEquals:!0},ChoiceRule:{"Fn:OneOf":"ComparisonOperators",Variable:!0,Next:!0},NestedChoiceRule:{"Fn:OneOf":"ComparisonOperators",Variable:!0},Catcher:{ErrorEquals:!0,ResultPath:!0,Next:!0},Retrier:{ErrorEquals:!0,IntervalSeconds:!0,MaxAttempts:!0,BackoffRate:!0}},Root:{Comment:!0,StartAt:!0,TimeoutSeconds:!0,Version:!0,States:!0},NestedRoot:{Comment:!0,StartAt:!0,States:!0}}},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(64),o=n(51);let i=Buffer.from("\r","ascii")[0],s=Buffer.from("\n","ascii")[0];class a{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(8192)}append(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=Buffer.allocUnsafe(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var o=8192*(Math.ceil((this.index+t.length)/8192)+1);0===this.index?(this.buffer=Buffer.allocUnsafe(o),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],o)}this.index+=t.length}tryReadHeaders(){let e=void 0,t=0;for(;t+3<this.index&&(this.buffer[t]!==i||this.buffer[t+1]!==s||this.buffer[t+2]!==i||this.buffer[t+3]!==s);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach(t=>{let n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=t.substr(0,n),o=t.substr(n+1).trim();e[r]=o});let n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}!function(e){e.is=function(e){let t=e;return t&&o.func(t.listen)&&o.func(t.dispose)&&o.func(t.onError)&&o.func(t.onClose)&&o.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class c{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=c;class u extends c{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new a(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",e=>{this.onData(e)}),this.readable.on("error",e=>this.fireError(e)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=u;t.IPCMessageReader=class extends c{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};t.SocketMessageReader=class extends u{constructor(e,t="utf-8"){super(e,t)}}},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(64),o=n(51);!function(e){e.is=function(e){let t=e;return t&&o.func(t.dispose)&&o.func(t.onClose)&&o.func(t.onError)&&o.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class i{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=i;t.StreamMessageWriter=class extends i{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",e=>this.fireError(e)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.writable.write(n.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.IPCMessageWriter=class extends i{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};t.SocketMessageWriter=class extends i{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",e=>this.fireError(e)),this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose(),this.socket.destroy()}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),n=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.sending=!0,this.socket.write(n.join(""),"ascii",n=>{n&&this.handleError(n,e);try{this.socket.write(t,this.encoding,t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(n){this.handleError(n,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},92:function(e,t){e.exports=require("child_process")}});
//# sourceMappingURL=aslServer.js.map